[![](https://github.com/leisurelicht/wtfpython-cn/raw/master/images/logo.png)](https://github.com/leisurelicht/wtfpython-cn/blob/master/images/logo.png)

ä¸€äº›æœ‰è¶£ä¸”é²œä¸ºäººçŸ¥çš„ Python ç‰¹æ€§. #Python

[English](https://github.com/satwikkansal/wtfpython) | [ä¸­æ–‡](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#)

[![WTFPL 2.0](https://camo.githubusercontent.com/8faf26c628ab8cf2a5c40e4673880fd74f525fe5427983bb4c9f99302af8a1a4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d575446504c253230322e302d6c69676874677265792e7376673f7374796c653d666c61742d737175617265)](http://www.wtfpl.net/) [![Commit id](https://camo.githubusercontent.com/92bf593b68b3fdc3b7189cb8b2ca67b040230545fd028507b00a26f48ebec57a/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f436f6d6d69742d3330653035612d79656c6c6f772e737667)](https://github.com/satwikkansal/wtfpython/commit/30e05a5973930c38cdb59f1c02b85b19b22ac531) [![996.icu](https://camo.githubusercontent.com/88df9d1c7282f11e7579ce56f585ea096ddad3b44e6d3a90e59f6b2968118466/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c696e6b2d3939362e6963752d7265642e737667)](https://996.icu/)

Python, æ˜¯ä¸€ä¸ªè®¾è®¡ä¼˜ç¾çš„è§£é‡Šå‹é«˜çº§è¯­è¨€, å®ƒæä¾›äº†å¾ˆå¤šèƒ½è®©ç¨‹åºå‘˜æ„Ÿåˆ°èˆ’é€‚çš„åŠŸèƒ½ç‰¹æ€§. ä½†æœ‰çš„æ—¶å€™, Python çš„ä¸€äº›è¾“å‡ºç»“æœå¯¹äºåˆå­¦è€…æ¥è¯´ä¼¼ä¹å¹¶ä¸æ˜¯é‚£ä¹ˆä¸€ç›®äº†ç„¶.

è¿™ä¸ªæœ‰è¶£çš„é¡¹ç›®æ„åœ¨æ”¶é›† Python ä¸­é‚£äº›éš¾ä»¥ç†è§£å’Œåäººç±»ç›´è§‰çš„ä¾‹å­ä»¥åŠé²œä¸ºäººçŸ¥çš„åŠŸèƒ½ç‰¹æ€§, å¹¶å°è¯•è®¨è®ºè¿™äº›ç°è±¡èƒŒåçœŸæ­£çš„åŸç†!

è™½ç„¶ä¸‹é¢çš„æœ‰äº›ä¾‹å­å¹¶ä¸ä¸€å®šä¼šè®©ä½ è§‰å¾— WTFs, ä½†å®ƒä»¬ä¾ç„¶æœ‰å¯èƒ½ä¼šå‘Šè¯‰ä½ ä¸€äº›ä½ æ‰€ä¸çŸ¥é“çš„ Python æœ‰è¶£ç‰¹æ€§. æˆ‘è§‰å¾—è¿™æ˜¯ä¸€ç§å­¦ä¹ ç¼–ç¨‹è¯­è¨€å†…éƒ¨åŸç†çš„å¥½åŠæ³•, è€Œä¸”æˆ‘ç›¸ä¿¡ä½ ä¹Ÿä¼šä»ä¸­è·å¾—ä¹è¶£!

å¦‚æœæ‚¨æ˜¯ä¸€ä½ç»éªŒæ¯”è¾ƒä¸°å¯Œçš„ Python ç¨‹åºå‘˜, ä½ å¯ä»¥å°è¯•æŒ‘æˆ˜çœ‹æ˜¯å¦èƒ½ä¸€æ¬¡å°±æ‰¾åˆ°ä¾‹å­çš„æ­£ç¡®ç­”æ¡ˆ. ä½ å¯èƒ½å¯¹å…¶ä¸­çš„ä¸€äº›ä¾‹å­å·²ç»æ¯”è¾ƒç†Ÿæ‚‰äº†, é‚£è¿™ä¹Ÿè®¸èƒ½å”¤èµ·ä½ å½“å¹´è¸©è¿™äº›å‘æ—¶çš„ç”œèœœå›å¿† ğŸ˜…

PS: å¦‚æœä½ ä¸æ˜¯ç¬¬ä¸€æ¬¡è¯»äº†, ä½ å¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/satwikkansal/wtfpython/releases/)è·å–å˜åŠ¨å†…å®¹.

é‚£ä¹ˆ, è®©æˆ‘ä»¬å¼€å§‹å§...

- [Table of Contents/ç›®å½•](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#table-of-contents%E7%9B%AE%E5%BD%95)
- [Structure of the Examples/ç¤ºä¾‹ç»“æ„](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#structure-of-the-examples%E7%A4%BA%E4%BE%8B%E7%BB%93%E6%9E%84)
- [Usage/ç”¨æ³•](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#usage%E7%94%A8%E6%B3%95)
- [ğŸ‘€ Examples/ç¤ºä¾‹](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-examples%E7%A4%BA%E4%BE%8B)
  - [Section: Strain your brain!/å¤§è„‘è¿åŠ¨!](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#section-strain-your-brain%E5%A4%A7%E8%84%91%E8%BF%90%E5%8A%A8)
    - [\> Strings can be tricky sometimes/å¾®å¦™çš„å­—ç¬¦ä¸² \*](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-strings-can-be-tricky-sometimes%E5%BE%AE%E5%A6%99%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2-)
    - [\> Time for some hash brownies!/æ˜¯æ—¶å€™æ¥ç‚¹è›‹ç³•äº†!](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-time-for-some-hash-brownies%E6%98%AF%E6%97%B6%E5%80%99%E6%9D%A5%E7%82%B9%E8%9B%8B%E7%B3%95%E4%BA%86)
    - [\> Return return everywhere!/åˆ°å¤„è¿”å›ï¼](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-return-return-everywhere%E5%88%B0%E5%A4%84%E8%BF%94%E5%9B%9E)
    - [\> Deep down, we're all the same./æœ¬è´¨ä¸Š,æˆ‘ä»¬éƒ½ä¸€æ ·. \*](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-deep-down-were-all-the-same%E6%9C%AC%E8%B4%A8%E4%B8%8A%E6%88%91%E4%BB%AC%E9%83%BD%E4%B8%80%E6%A0%B7-)
    - [\> For what?/ä¸ºä»€ä¹ˆ?](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-for-what%E4%B8%BA%E4%BB%80%E4%B9%88)
    - [\> Evaluation time discrepancy/æ‰§è¡Œæ—¶æœºå·®å¼‚](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-evaluation-time-discrepancy%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%B7%AE%E5%BC%82)
    - [\> `is` is not what it is!/å‡ºäººæ„æ–™çš„`is`!](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-is-is-not-what-it-is%E5%87%BA%E4%BA%BA%E6%84%8F%E6%96%99%E7%9A%84is)
    - [\> A tic-tac-toe where X wins in the first attempt!/ä¸€è¹´å³è‡³!](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-a-tic-tac-toe-where-x-wins-in-the-first-attempt%E4%B8%80%E8%B9%B4%E5%8D%B3%E8%87%B3)
    - [\> The sticky output function/éº»çƒ¦çš„è¾“å‡º](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-the-sticky-output-function%E9%BA%BB%E7%83%A6%E7%9A%84%E8%BE%93%E5%87%BA)
    - [\> `is not ...` is not `is (not ...)`/`is not ...` ä¸æ˜¯ `is (not ...)`](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-is-not--is-not-is-not-is-not--%E4%B8%8D%E6%98%AF-is-not-)
    - [\> The surprising comma/æ„å¤–çš„é€—å·](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-the-surprising-comma%E6%84%8F%E5%A4%96%E7%9A%84%E9%80%97%E5%8F%B7)
    - [\> Backslashes at the end of string/å­—ç¬¦ä¸²æœ«å°¾çš„åæ–œæ ](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-backslashes-at-the-end-of-string%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9C%AB%E5%B0%BE%E7%9A%84%E5%8F%8D%E6%96%9C%E6%9D%A0)
    - [\> not knot!/åˆ«çº ç»“!](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-not-knot%E5%88%AB%E7%BA%A0%E7%BB%93)
    - [\> Half triple-quoted strings/ä¸‰ä¸ªå¼•å·](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-half-triple-quoted-strings%E4%B8%89%E4%B8%AA%E5%BC%95%E5%8F%B7)
    - [\> Midnight time doesn't exist?/ä¸å­˜åœ¨çš„åˆå¤œ?](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-midnight-time-doesnt-exist%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E5%8D%88%E5%A4%9C)
    - [\> What's wrong with booleans?/å¸ƒå°”ä½ å’‹äº†?](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-whats-wrong-with-booleans%E5%B8%83%E5%B0%94%E4%BD%A0%E5%92%8B%E4%BA%86)
    - [\> Class attributes and instance attributes/ç±»å±æ€§å’Œå®ä¾‹å±æ€§](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-class-attributes-and-instance-attributes%E7%B1%BB%E5%B1%9E%E6%80%A7%E5%92%8C%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7)
    - [\> yielding None/ç”Ÿæˆ None](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-yielding-none%E7%94%9F%E6%88%90-none)
    - [\> Mutating the immutable!/å¼ºäººæ‰€éš¾](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-mutating-the-immutable%E5%BC%BA%E4%BA%BA%E6%89%80%E9%9A%BE)
    - [\> The disappearing variable from outer scope/æ¶ˆå¤±çš„å¤–éƒ¨å˜é‡](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-the-disappearing-variable-from-outer-scope%E6%B6%88%E5%A4%B1%E7%9A%84%E5%A4%96%E9%83%A8%E5%8F%98%E9%87%8F)
    - [\> When True is actually False/çœŸäº¦å‡](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-when-true-is-actually-false%E7%9C%9F%E4%BA%A6%E5%81%87)
    - [\> From filled to None in one instruction.../ä»æœ‰åˆ°æ— ...](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-from-filled-to-none-in-one-instruction%E4%BB%8E%E6%9C%89%E5%88%B0%E6%97%A0)
    - [\> Subclass relationships/å­ç±»å…³ç³» \*](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-subclass-relationships%E5%AD%90%E7%B1%BB%E5%85%B3%E7%B3%BB-)
    - [\> The mysterious key type conversion/ç¥ç§˜çš„é”®å‹è½¬æ¢ \*](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-the-mysterious-key-type-conversion%E7%A5%9E%E7%A7%98%E7%9A%84%E9%94%AE%E5%9E%8B%E8%BD%AC%E6%8D%A2-)
    - [\> Let's see if you can guess this?/çœ‹çœ‹ä½ èƒ½å¦çŒœåˆ°è¿™ä¸€ç‚¹?](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-lets-see-if-you-can-guess-this%E7%9C%8B%E7%9C%8B%E4%BD%A0%E8%83%BD%E5%90%A6%E7%8C%9C%E5%88%B0%E8%BF%99%E4%B8%80%E7%82%B9)
  - [Section: Appearances are deceptive!/å¤–è¡¨æ˜¯é ä¸ä½çš„!](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#section-appearances-are-deceptive%E5%A4%96%E8%A1%A8%E6%98%AF%E9%9D%A0%E4%B8%8D%E4%BD%8F%E7%9A%84)
    - [\> Skipping lines?/è·³è¿‡ä¸€è¡Œ?](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-skipping-lines%E8%B7%B3%E8%BF%87%E4%B8%80%E8%A1%8C)
    - [\> Teleportation/ç©ºé—´ç§»åŠ¨ \*](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-teleportation%E7%A9%BA%E9%97%B4%E7%A7%BB%E5%8A%A8-)
    - [\> Well, something is fishy.../å—¯, æœ‰äº›å¯ç–‘...](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-well-something-is-fishy%E5%97%AF%E6%9C%89%E4%BA%9B%E5%8F%AF%E7%96%91)
  - [Section: Watch out for the landmines!/å°å¿ƒåœ°é›·!](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#section-watch-out-for-the-landmines%E5%B0%8F%E5%BF%83%E5%9C%B0%E9%9B%B7)
    - [\> Modifying a dictionary while iterating over it/è¿­ä»£å­—å…¸æ—¶çš„ä¿®æ”¹](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-modifying-a-dictionary-while-iterating-over-it%E8%BF%AD%E4%BB%A3%E5%AD%97%E5%85%B8%E6%97%B6%E7%9A%84%E4%BF%AE%E6%94%B9)
    - [\> Stubborn `del` operator/åšå¼ºçš„ `del` \*](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-stubborn-del-operator%E5%9D%9A%E5%BC%BA%E7%9A%84-del-)
    - [\> Deleting a list item while iterating/è¿­ä»£åˆ—è¡¨æ—¶åˆ é™¤å…ƒç´ ](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-deleting-a-list-item-while-iterating%E8%BF%AD%E4%BB%A3%E5%88%97%E8%A1%A8%E6%97%B6%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0)
    - [\> Loop variables leaking out!/å¾ªç¯å˜é‡æ³„æ¼!](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-loop-variables-leaking-out%E5%BE%AA%E7%8E%AF%E5%8F%98%E9%87%8F%E6%B3%84%E6%BC%8F)
    - [\> Beware of default mutable arguments!/å½“å¿ƒé»˜è®¤çš„å¯å˜å‚æ•°!](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-beware-of-default-mutable-arguments%E5%BD%93%E5%BF%83%E9%BB%98%E8%AE%A4%E7%9A%84%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0)
    - [\> Catching the Exceptions/æ•è·å¼‚å¸¸](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-catching-the-exceptions%E6%8D%95%E8%8E%B7%E5%BC%82%E5%B8%B8)
    - [\> Same operands, different story!/åŒäººä¸åŒå‘½!](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-same-operands-different-story%E5%90%8C%E4%BA%BA%E4%B8%8D%E5%90%8C%E5%91%BD)
    - [\> The out of scope variable/å¤–éƒ¨ä½œç”¨åŸŸå˜é‡](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-the-out-of-scope-variable%E5%A4%96%E9%83%A8%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%8F%98%E9%87%8F)
    - [\> Be careful with chained operations/å°å¿ƒé“¾å¼æ“ä½œ](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-be-careful-with-chained-operations%E5%B0%8F%E5%BF%83%E9%93%BE%E5%BC%8F%E6%93%8D%E4%BD%9C)
    - [\> Name resolution ignoring class scope/å¿½ç•¥ç±»ä½œç”¨åŸŸçš„åç§°è§£æ](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-name-resolution-ignoring-class-scope%E5%BF%BD%E7%95%A5%E7%B1%BB%E4%BD%9C%E7%94%A8%E5%9F%9F%E7%9A%84%E5%90%8D%E7%A7%B0%E8%A7%A3%E6%9E%90)
    - [\> Needle in a Haystack/å¤§æµ·æé’ˆ](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-needle-in-a-haystack%E5%A4%A7%E6%B5%B7%E6%8D%9E%E9%92%88)
  - [Section: The Hidden treasures!/éšè—çš„å®è—!](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#section-the-hidden-treasures%E9%9A%90%E8%97%8F%E7%9A%84%E5%AE%9D%E8%97%8F)
    - [\> Okay Python, Can you make me fly?/Python, å¯å¦å¸¦æˆ‘é£? \*](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-okay-python-can-you-make-me-flypython-%E5%8F%AF%E5%90%A6%E5%B8%A6%E6%88%91%E9%A3%9E-)
    - [\> `goto`, but why?/`goto`, ä½†ä¸ºä»€ä¹ˆ? \*](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-goto-but-whygoto-%E4%BD%86%E4%B8%BA%E4%BB%80%E4%B9%88-)
    - [\> Brace yourself!/åšå¥½æ€æƒ³å‡†å¤‡ \*](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-brace-yourself%E5%81%9A%E5%A5%BD%E6%80%9D%E6%83%B3%E5%87%86%E5%A4%87-)
    - [\> Let's meet Friendly Language Uncle For Life/è®©ç”Ÿæ´»æ›´å‹å¥½ \*](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-lets-meet-friendly-language-uncle-for-life%E8%AE%A9%E7%94%9F%E6%B4%BB%E6%9B%B4%E5%8F%8B%E5%A5%BD-)
    - [\> Even Python understands that love is complicated/è¿ Python ä¹ŸçŸ¥é“çˆ±æ˜¯éš¾è¨€çš„ \*](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-even-python-understands-that-love-is-complicated%E8%BF%9EPython%E4%B9%9F%E7%9F%A5%E9%81%93%E7%88%B1%E6%98%AF%E9%9A%BE%E8%A8%80%E7%9A%84-)
    - [\> Yes, it exists!/æ˜¯çš„, å®ƒå­˜åœ¨!](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-yes-it-exists%E6%98%AF%E7%9A%84-%E5%AE%83%E5%AD%98%E5%9C%A8)
    - [\> Inpinity/æ— é™ \*](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-inpinity%E6%97%A0%E9%99%90-)
    - [\> Mangling time!ä¿®é¥°æ—¶é—´! \*](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-mangling-time%E4%BF%AE%E9%A5%B0%E6%97%B6%E9%97%B4-)
  - [Section: Miscellaneous/æ‚é¡¹](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#section-miscellaneous%E6%9D%82%E9%A1%B9)
    - [\> `+=` is faster/æ›´å¿«çš„ `+=`](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#--is-faster%E6%9B%B4%E5%BF%AB%E7%9A%84-)
    - [\> Let's make a giant string!/æ¥åšä¸ªå·¨å¤§çš„å­—ç¬¦ä¸²å§!](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-lets-make-a-giant-string%E6%9D%A5%E5%81%9A%E4%B8%AA%E5%B7%A8%E5%A4%A7%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%90%A7)
    - [\> Explicit typecast of strings/å­—ç¬¦ä¸²çš„æ˜¾å¼ç±»å‹è½¬æ¢](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-explicit-typecast-of-strings%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%98%BE%E5%BC%8F%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2)
    - [\> Minor Ones/å°çŸ¥è¯†ç‚¹](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-minor-ones%E5%B0%8F%E7%9F%A5%E8%AF%86%E7%82%B9)
- [Contributing/è´¡çŒ®](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#contributing%E8%B4%A1%E7%8C%AE)
- [Acknowledgements/è‡´è°¢](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#acknowledgements%E8%87%B4%E8%B0%A2)
- [ğŸ“ License/è®¸å¯](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#-license%E8%AE%B8%E5%8F%AF)
  - [Help/å¸®åŠ©](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#help%E5%B8%AE%E5%8A%A9)
  - [Surprise your geeky pythonist friends?/æƒ³ç»™ä½ çš„æå®¢æœ‹å‹ä¸€ä¸ªæƒŠå–œ?](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#surprise-your-geeky-pythonist-friends%E6%83%B3%E7%BB%99%E4%BD%A0%E7%9A%84%E6%9E%81%E5%AE%A2%E6%9C%8B%E5%8F%8B%E4%B8%80%E4%B8%AA%E6%83%8A%E5%96%9C)
  - [Need a pdf version?/éœ€è¦æ¥ä¸€ä»½ pdf ç‰ˆçš„?](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#need-a-pdf-version%E9%9C%80%E8%A6%81%E6%9D%A5%E4%B8%80%E4%BB%BDpdf%E7%89%88%E7%9A%84)
  - [Follow Commit/è¿½è¸ª Commit](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#follow-commit%E8%BF%BD%E8%B8%AACommit)
  - [996.icu](https://github.com/leisurelicht/wtfpython-cn/blob/master/README.md#996icu)

æ‰€æœ‰ç¤ºä¾‹çš„ç»“æ„éƒ½å¦‚ä¸‹æ‰€ç¤º:

> ### \> ä¸€ä¸ªç²¾é€‰çš„æ ‡é¢˜ \*
>
> æ ‡é¢˜æœ«å°¾çš„æ˜Ÿå·è¡¨ç¤ºè¯¥ç¤ºä¾‹åœ¨ç¬¬ä¸€ç‰ˆä¸­ä¸å­˜åœ¨ï¼Œæ˜¯æœ€è¿‘æ·»åŠ çš„.
>
> **Output (Python version):**
>
> (å¯é€‰): å¯¹æ„å¤–è¾“å‡ºç»“æœçš„ç®€çŸ­æè¿°.
>
> #### ğŸ’¡ è¯´æ˜:
>
> - ç®€è¦è¯´æ˜å‘ç”Ÿäº†ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆä¼šå‘ç”Ÿ. **Output:**
>
>   \>>\> è§¦å‘è¯­å¥ \# ä¸€äº›è®©é­”æ³•å˜å¾—å®¹æ˜“ç†è§£çš„ä¾‹å­
>   \# ä¸€äº›æ­£å¸¸çš„è¾“å…¥

**æ³¨æ„:** æ‰€æœ‰çš„ç¤ºä¾‹éƒ½åœ¨ Python 3.5.2 ç‰ˆæœ¬çš„äº¤äº’è§£é‡Šå™¨ä¸Šæµ‹è¯•è¿‡, å¦‚æœä¸ç‰¹åˆ«è¯´æ˜åº”è¯¥é€‚ç”¨äºæ‰€æœ‰ Python ç‰ˆæœ¬.

æˆ‘ä¸ªäººå»ºè®®, æœ€å¥½ä¾æ¬¡é˜…è¯»ä¸‹é¢çš„ç¤ºä¾‹, å¹¶å¯¹æ¯ä¸ªç¤ºä¾‹:

- ä»”ç»†é˜…è¯»è®¾ç½®ä¾‹å­æœ€å¼€å§‹çš„ä»£ç . å¦‚æœæ‚¨æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„ Python ç¨‹åºå‘˜, é‚£ä¹ˆå¤§å¤šæ•°æ—¶å€™æ‚¨éƒ½èƒ½æˆåŠŸé¢„æœŸåˆ°åé¢çš„ç»“æœ.
- é˜…è¯»è¾“å‡ºç»“æœ,
  - ç¡®è®¤ç»“æœæ˜¯å¦å¦‚ä½ æ‰€æ–™.
  - ç¡®è®¤ä½ æ˜¯å¦çŸ¥é“è¿™èƒŒåçš„åŸç†.
    - å¦‚æœä¸çŸ¥é“, æ·±å‘¼å¸ç„¶åé˜…è¯»è¯´æ˜ (å¦‚æœä½ è¿˜æ˜¯çœ‹ä¸æ˜ç™½, åˆ«æ²‰é»˜! å¯ä»¥åœ¨[è¿™](https://github.com/satwikkansal/wtfPython)æä¸ª issue).
    - å¦‚æœçŸ¥é“, ç»™è‡ªå·±ç‚¹å¥–åŠ±, ç„¶åå»çœ‹ä¸‹ä¸€ä¸ªä¾‹å­.

PS: ä½ ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œé˜…è¯» WTFpython. æˆ‘ä»¬æœ‰ pypi åŒ… å’Œ npm åŒ…(æ”¯æŒä»£ç é«˜äº®).(è¯‘: è¿™ä¸¤ä¸ªéƒ½æ˜¯è‹±æ–‡ç‰ˆçš„)

å®‰è£… npm åŒ… [`wtfpython`](https://www.npmjs.com/package/wtfpython)

$ npm install -g wtfpython

æˆ–è€…, å®‰è£… pypi åŒ… [`wtfpython`](https://pypi.python.org/pypi/wtfpython)

$ pip install wtfpython -U

ç°åœ¨, åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ `wtfpython`, ä½ å°±å¯ä»¥å¼€å§‹æµè§ˆäº†.

---

## Section: Strain your brain!/å¤§è„‘è¿åŠ¨!

### \> Strings can be tricky sometimes/å¾®å¦™çš„å­—ç¬¦ä¸² \*

1.

\>>\> a \= "some_string"
\>>\> id(a)
140420665652016
\>>\> id("some" + "\_" + "string") \# æ³¨æ„ä¸¤ä¸ªçš„ id å€¼æ˜¯ç›¸åŒçš„.
140420665652016

2.

\>>\> a \= "wtf"
\>>\> b \= "wtf"
\>>\> a is b
True

\>>\> a \= "wtf!"
\>>\> b \= "wtf!"
\>>\> a is b
False

\>>\> a, b \= "wtf!", "wtf!"
\>>\> a is b
True \# 3.7 ç‰ˆæœ¬è¿”å›ç»“æœä¸º False.

3.

\>>\> 'a' \* 20 is 'aaaaaaaaaaaaaaaaaaaa'
True
\>>\> 'a' \* 21 is 'aaaaaaaaaaaaaaaaaaaaa'
False \# 3.7 ç‰ˆæœ¬è¿”å›ç»“æœä¸º True

å¾ˆå¥½ç†è§£, å¯¹å§?

#### ğŸ’¡ è¯´æ˜:

- è¿™äº›è¡Œä¸ºæ˜¯ç”±äº Cpython åœ¨ç¼–è¯‘ä¼˜åŒ–æ—¶, æŸäº›æƒ…å†µä¸‹ä¼šå°è¯•ä½¿ç”¨å·²ç»å­˜åœ¨çš„ä¸å¯å˜å¯¹è±¡è€Œä¸æ˜¯æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡. (è¿™ç§è¡Œä¸ºè¢«ç§°ä½œå­—ç¬¦ä¸²çš„é©»ç•™\[string interning\])
- å‘ç”Ÿé©»ç•™ä¹‹å, è®¸å¤šå˜é‡å¯èƒ½æŒ‡å‘å†…å­˜ä¸­çš„ç›¸åŒå­—ç¬¦ä¸²å¯¹è±¡. (ä»è€ŒèŠ‚çœå†…å­˜)
- åœ¨ä¸Šé¢çš„ä»£ç ä¸­, å­—ç¬¦ä¸²æ˜¯éšå¼é©»ç•™çš„. ä½•æ—¶å‘ç”Ÿéšå¼é©»ç•™åˆ™å–å†³äºå…·ä½“çš„å®ç°. è¿™é‡Œæœ‰ä¸€äº›æ–¹æ³•å¯ä»¥ç”¨æ¥çŒœæµ‹å­—ç¬¦ä¸²æ˜¯å¦ä¼šè¢«é©»ç•™:

  - æ‰€æœ‰é•¿åº¦ä¸º 0 å’Œé•¿åº¦ä¸º 1 çš„å­—ç¬¦ä¸²éƒ½è¢«é©»ç•™.
  - å­—ç¬¦ä¸²åœ¨ç¼–è¯‘æ—¶è¢«å®ç° (`'wtf'` å°†è¢«é©»ç•™, ä½†æ˜¯ `''.join(['w', 't', 'f'])` å°†ä¸ä¼šè¢«é©»ç•™)
  - å­—ç¬¦ä¸²ä¸­åªåŒ…å«å­—æ¯ï¼Œæ•°å­—æˆ–ä¸‹åˆ’çº¿æ—¶å°†ä¼šé©»ç•™. æ‰€ä»¥ `'wtf!'` ç”±äºåŒ…å« `!` è€Œæœªè¢«é©»ç•™. å¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/python/cpython/blob/3.6/Objects/codeobject.c#L19)æ‰¾åˆ° CPython å¯¹æ­¤è§„åˆ™çš„å®ç°.

    [![](https://github.com/leisurelicht/wtfpython-cn/raw/master/images/string-intern/string_intern.png)](https://github.com/leisurelicht/wtfpython-cn/blob/master/images/string-intern/string_intern.png)

- å½“åœ¨åŒä¸€è¡Œå°† `a` å’Œ `b` çš„å€¼è®¾ç½®ä¸º `"wtf!"` çš„æ—¶å€™, Python è§£é‡Šå™¨ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡, ç„¶ååŒæ—¶å¼•ç”¨ç¬¬äºŒä¸ªå˜é‡(è¯‘: ä»…é€‚ç”¨äº 3.7 ä»¥ä¸‹, è¯¦ç»†æƒ…å†µè¯·çœ‹[è¿™é‡Œ](https://github.com/leisurelicht/wtfpython-cn/issues/13)). å¦‚æœä½ åœ¨ä¸åŒçš„è¡Œä¸Šè¿›è¡Œèµ‹å€¼æ“ä½œ, å®ƒå°±ä¸ä¼šâ€œçŸ¥é“â€å·²ç»æœ‰ä¸€ä¸ª `wtfï¼` å¯¹è±¡ (å› ä¸º `"wtf!"` ä¸æ˜¯æŒ‰ç…§ä¸Šé¢æåˆ°çš„æ–¹å¼è¢«éšå¼é©»ç•™çš„). å®ƒæ˜¯ä¸€ç§ç¼–è¯‘å™¨ä¼˜åŒ–, ç‰¹åˆ«é€‚ç”¨äºäº¤äº’å¼ç¯å¢ƒ.
- å¸¸é‡æŠ˜å (constant folding) æ˜¯ Python ä¸­çš„ä¸€ç§ [çª¥å­”ä¼˜åŒ–(peephole optimization)](https://en.wikipedia.org/wiki/Peephole_optimization) æŠ€æœ¯. è¿™æ„å‘³ç€åœ¨ç¼–è¯‘æ—¶è¡¨è¾¾å¼ `'a'*20` ä¼šè¢«æ›¿æ¢ä¸º `'aaaaaaaaaaaaaaaaaaaa'` ä»¥å‡å°‘è¿è¡Œæ—¶çš„æ—¶é’Ÿå‘¨æœŸ. åªæœ‰é•¿åº¦å°äº 20 çš„å­—ç¬¦ä¸²æ‰ä¼šå‘ç”Ÿå¸¸é‡æŠ˜å . (ä¸ºå•¥? æƒ³è±¡ä¸€ä¸‹ç”±äºè¡¨è¾¾å¼ `'a'*10**10` è€Œç”Ÿæˆçš„ `.pyc` æ–‡ä»¶çš„å¤§å°). ç›¸å…³çš„æºç å®ç°åœ¨[è¿™é‡Œ](https://github.com/python/cpython/blob/3.6/Python/peephole.c#L288).
- å¦‚æœä½ æ˜¯ä½¿ç”¨ 3.7 ç‰ˆæœ¬ä¸­è¿è¡Œä¸Šè¿°ç¤ºä¾‹ä»£ç , ä¼šå‘ç°éƒ¨åˆ†ä»£ç çš„è¿è¡Œç»“æœä¸æ³¨é‡Šè¯´æ˜ç›¸åŒ. è¿™æ˜¯å› ä¸ºåœ¨ 3.7 ç‰ˆæœ¬ä¸­, å¸¸é‡æŠ˜å å·²ç»ä»çª¥å­”ä¼˜åŒ–å™¨è¿ç§»è‡³æ–°çš„ AST ä¼˜åŒ–å™¨, åè€…å¯ä»¥ä»¥æ›´é«˜çš„ä¸€è‡´æ€§æ¥æ‰§è¡Œä¼˜åŒ–. (ç”± Eugene Toder å’Œ INADA Naoki åœ¨ [bpo-29469](https://bugs.python.org/issue29469) å’Œ [bpo-11549](https://bugs.python.org/issue11549) ä¸­è´¡çŒ®.)
- (è¯‘: ä½†æ˜¯åœ¨æœ€æ–°çš„ 3.8 ç‰ˆæœ¬ä¸­, ç»“æœåˆå˜å›å»äº†. è™½ç„¶ 3.8 ç‰ˆæœ¬å’Œ 3.7 ç‰ˆæœ¬ä¸€æ ·, éƒ½æ˜¯ä½¿ç”¨ AST ä¼˜åŒ–å™¨. ç›®å‰ä¸ç¡®å®šå®˜æ–¹å¯¹ 3.8 ç‰ˆæœ¬çš„ AST åšäº†ä»€ä¹ˆè°ƒæ•´.)

---

### \> Time for some hash brownies!/æ˜¯æ—¶å€™æ¥ç‚¹è›‹ç³•äº†!

- hash brownie æŒ‡ä¸€ç§å«æœ‰å¤§éº»æˆåˆ†çš„è›‹ç³•, æ‰€ä»¥è¿™é‡Œæ˜¯å¥åŒå…³

1.

some_dict \= {}
some_dict\[5.5\] \= "Ruby"
some_dict\[5.0\] \= "JavaScript"
some_dict\[5\] \= "Python"

**Output:**

\>>\> some_dict\[5.5\]
"Ruby"
\>>\> some_dict\[5.0\]
"Python"
\>>\> some_dict\[5\]
"Python"

"Python" æ¶ˆé™¤äº† "JavaScript" çš„å­˜åœ¨?

#### ğŸ’¡ è¯´æ˜:

- Python å­—å…¸é€šè¿‡æ£€æŸ¥é”®å€¼æ˜¯å¦ç›¸ç­‰å’Œæ¯”è¾ƒå“ˆå¸Œå€¼æ¥ç¡®å®šä¸¤ä¸ªé”®æ˜¯å¦ç›¸åŒ.
- å…·æœ‰ç›¸åŒå€¼çš„ä¸å¯å˜å¯¹è±¡åœ¨ Python ä¸­å§‹ç»ˆå…·æœ‰ç›¸åŒçš„å“ˆå¸Œå€¼.

  \>>\> 5 \== 5.0
  True
  \>>\> hash(5) \== hash(5.0)
  True

  **æ³¨æ„:** å…·æœ‰ä¸åŒå€¼çš„å¯¹è±¡ä¹Ÿå¯èƒ½å…·æœ‰ç›¸åŒçš„å“ˆå¸Œå€¼ï¼ˆå“ˆå¸Œå†²çªï¼‰.

- å½“æ‰§è¡Œ `some_dict[5] = "Python"` è¯­å¥æ—¶, å› ä¸º Python å°† `5` å’Œ `5.0` è¯†åˆ«ä¸º `some_dict` çš„åŒä¸€ä¸ªé”®, æ‰€ä»¥å·²æœ‰å€¼ "JavaScript" å°±è¢« "Python" è¦†ç›–äº†.
- è¿™ä¸ª StackOverflow çš„ [å›ç­”](https://stackoverflow.com/a/32211042/4354153) æ¼‚äº®åœ°è§£é‡Šäº†è¿™èƒŒåçš„åŸºæœ¬åŸç†.

---

### \> Return return everywhere!/åˆ°å¤„è¿”å›ï¼

def some_func():
try:
return 'from_try'
finally:
return 'from_finally'

**Output:**

\>>\> some_func()
'from_finally'

#### ğŸ’¡ è¯´æ˜:

- å½“åœ¨ "try...finally" è¯­å¥çš„ `try` ä¸­æ‰§è¡Œ `return`, `break` æˆ– `continue` å, `finally` å­å¥ä¾ç„¶ä¼šæ‰§è¡Œ.
- å‡½æ•°çš„è¿”å›å€¼ç”±æœ€åæ‰§è¡Œçš„ `return` è¯­å¥å†³å®š. ç”±äº `finally` å­å¥ä¸€å®šä¼šæ‰§è¡Œ, æ‰€ä»¥ `finally` å­å¥ä¸­çš„ `return` å°†å§‹ç»ˆæ˜¯æœ€åæ‰§è¡Œçš„è¯­å¥.

---

### \> Deep down, we're all the same./æœ¬è´¨ä¸Š,æˆ‘ä»¬éƒ½ä¸€æ ·. \*

**Output:**

\>>\> WTF() \== WTF() \# ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡åº”è¯¥ä¸ç›¸ç­‰
False
\>>\> WTF() is WTF() \# ä¹Ÿä¸ç›¸åŒ
False
\>>\> hash(WTF()) \== hash(WTF()) \# å“ˆå¸Œå€¼ä¹Ÿåº”è¯¥ä¸åŒ
True
\>>\> id(WTF()) \== id(WTF())
True

#### ğŸ’¡ è¯´æ˜:

- å½“è°ƒç”¨ `id` å‡½æ•°æ—¶, Python åˆ›å»ºäº†ä¸€ä¸ª `WTF` ç±»çš„å¯¹è±¡å¹¶ä¼ ç»™ `id` å‡½æ•°. ç„¶å `id` å‡½æ•°è·å–å…¶ id å€¼ (ä¹Ÿå°±æ˜¯å†…å­˜åœ°å€), ç„¶åä¸¢å¼ƒè¯¥å¯¹è±¡. è¯¥å¯¹è±¡å°±è¢«é”€æ¯äº†.
- å½“æˆ‘ä»¬è¿ç»­ä¸¤æ¬¡è¿›è¡Œè¿™ä¸ªæ“ä½œæ—¶, Python ä¼šå°†ç›¸åŒçš„å†…å­˜åœ°å€åˆ†é…ç»™ç¬¬äºŒä¸ªå¯¹è±¡. å› ä¸º (åœ¨ CPython ä¸­) `id` å‡½æ•°ä½¿ç”¨å¯¹è±¡çš„å†…å­˜åœ°å€ä½œä¸ºå¯¹è±¡çš„ id å€¼, æ‰€ä»¥ä¸¤ä¸ªå¯¹è±¡çš„ id å€¼æ˜¯ç›¸åŒçš„.
- ç»¼ä¸Š, å¯¹è±¡çš„ id å€¼ä»…ä»…åœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå†…å”¯ä¸€. åœ¨å¯¹è±¡è¢«é”€æ¯ä¹‹å, æˆ–è¢«åˆ›å»ºä¹‹å‰, å…¶ä»–å¯¹è±¡å¯ä»¥å…·æœ‰ç›¸åŒçš„ id å€¼.
- é‚£ä¸ºä»€ä¹ˆ `is` æ“ä½œçš„ç»“æœä¸º `False` å‘¢? è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ®µä»£ç .

  class WTF(object):
  def \_\_init\_\_(self): print("I")
  def \_\_del\_\_(self): print("D")

  **Output:**

  \>>\> WTF() is WTF()
  I
  I
  D
  D
  False
  \>>\> id(WTF()) \== id(WTF())
  I
  D
  I
  D
  True

  æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„, å¯¹è±¡é”€æ¯çš„é¡ºåºæ˜¯é€ æˆæ‰€æœ‰ä¸åŒä¹‹å¤„çš„åŸå› .

---

### \> For what?/ä¸ºä»€ä¹ˆ?

some_string \= "wtf"
some_dict \= {}
for i, some_dict\[i\] in enumerate(some_string):
pass

**Output:**

\>>\> some_dict \# åˆ›å»ºäº†ç´¢å¼•å­—å…¸.
{0: 'w', 1: 't', 2: 'f'}

#### ğŸ’¡ è¯´æ˜:

- [Python è¯­æ³•](https://docs.python.org/3/reference/grammar.html) ä¸­å¯¹ `for` çš„å®šä¹‰æ˜¯:

  ```
  for_stmt: 'for' exprlist 'in' testlist ':' suite ['else' ':' suite]
  ```

  å…¶ä¸­ `exprlist` æŒ‡åˆ†é…ç›®æ ‡. è¿™æ„å‘³ç€å¯¹å¯è¿­ä»£å¯¹è±¡ä¸­çš„**æ¯ä¸€é¡¹éƒ½ä¼šæ‰§è¡Œ**ç±»ä¼¼ `{exprlist} = {next_value}` çš„æ“ä½œ.

  ä¸€ä¸ªæœ‰è¶£çš„ä¾‹å­è¯´æ˜äº†è¿™ä¸€ç‚¹:

  for i in range(4):
  print(i)
  i \= 10

  **Output:**

  ä½ å¯æ›¾è§‰å¾—è¿™ä¸ªå¾ªç¯åªä¼šè¿è¡Œä¸€æ¬¡?

  **ğŸ’¡ è¯´æ˜:**

  - ç”±äºå¾ªç¯åœ¨ Python ä¸­å·¥ä½œæ–¹å¼, èµ‹å€¼è¯­å¥ `i = 10` å¹¶ä¸ä¼šå½±å“è¿­ä»£å¾ªç¯, åœ¨æ¯æ¬¡è¿­ä»£å¼€å§‹ä¹‹å‰, è¿­ä»£å™¨(è¿™é‡ŒæŒ‡ `range(4)`) ç”Ÿæˆçš„ä¸‹ä¸€ä¸ªå…ƒç´ å°±è¢«è§£åŒ…å¹¶èµ‹å€¼ç»™ç›®æ ‡åˆ—è¡¨çš„å˜é‡(è¿™é‡ŒæŒ‡ `i`)äº†.

- åœ¨æ¯ä¸€æ¬¡çš„è¿­ä»£ä¸­, `enumerate(some_string)` å‡½æ•°å°±ç”Ÿæˆä¸€ä¸ªæ–°å€¼ `i` (è®¡æ•°å™¨å¢åŠ ) å¹¶ä» `some_string` ä¸­è·å–ä¸€ä¸ªå­—ç¬¦. ç„¶åå°†å­—å…¸ `some_dict` é”® `i` (åˆšåˆšåˆ†é…çš„) çš„å€¼è®¾ä¸ºè¯¥å­—ç¬¦. æœ¬ä¾‹ä¸­å¾ªç¯çš„å±•å¼€å¯ä»¥ç®€åŒ–ä¸º:

  \>>\> i, some_dict\[i\] \= (0, 'w')
  \>>\> i, some_dict\[i\] \= (1, 't')
  \>>\> i, some_dict\[i\] \= (2, 'f')
  \>>\> some_dict

---

### \> Evaluation time discrepancy/æ‰§è¡Œæ—¶æœºå·®å¼‚

1.

array \= \[1, 8, 15\]
g \= (x for x in array if array.count(x) \> 0)
array \= \[2, 8, 22\]

**Output:**

2.

array_1 \= \[1,2,3,4\]
g1 \= (x for x in array_1)
array_1 \= \[1,2,3,4,5\]

array_2 \= \[1,2,3,4\]
g2 \= (x for x in array_2)
array_2\[:\] \= \[1,2,3,4,5\]

**Output:**

\>>\> print(list(g1))
\[1,2,3,4\]

\>>\> print(list(g2))
\[1,2,3,4,5\]

#### ğŸ’¡ è¯´æ˜

- åœ¨[ç”Ÿæˆå™¨](https://wiki.python.org/moin/Generators)è¡¨è¾¾å¼ä¸­, `in` å­å¥åœ¨å£°æ˜æ—¶æ‰§è¡Œ, è€Œæ¡ä»¶å­å¥åˆ™æ˜¯åœ¨è¿è¡Œæ—¶æ‰§è¡Œ.
- æ‰€ä»¥åœ¨è¿è¡Œå‰, `array` å·²ç»è¢«é‡æ–°èµ‹å€¼ä¸º `[2, 8, 22]`, å› æ­¤å¯¹äºä¹‹å‰çš„ `1`, `8` å’Œ `15`, åªæœ‰ `count(8)` çš„ç»“æœæ˜¯å¤§äº `0` çš„, æ‰€ä»¥ç”Ÿæˆå™¨åªä¼šç”Ÿæˆ `8`.
- ç¬¬äºŒéƒ¨åˆ†ä¸­ `g1` å’Œ `g2` çš„è¾“å‡ºå·®å¼‚åˆ™æ˜¯ç”±äºå˜é‡ `array_1` å’Œ `array_2` è¢«é‡æ–°èµ‹å€¼çš„æ–¹å¼å¯¼è‡´çš„.
- åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹, `array_1` è¢«ç»‘å®šåˆ°æ–°å¯¹è±¡ `[1,2,3,4,5]`, å› ä¸º `in` å­å¥æ˜¯åœ¨å£°æ˜æ—¶è¢«æ‰§è¡Œçš„ï¼Œ æ‰€ä»¥å®ƒä»ç„¶å¼•ç”¨æ—§å¯¹è±¡ `[1,2,3,4]`(å¹¶æ²¡æœ‰è¢«é”€æ¯).
- åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹, å¯¹ `array_2` çš„åˆ‡ç‰‡èµ‹å€¼å°†ç›¸åŒçš„æ—§å¯¹è±¡ `[1,2,3,4]` åŸåœ°æ›´æ–°ä¸º `[1,2,3,4,5]`. å› æ­¤ `g2` å’Œ `array_2` ä»ç„¶å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡(è¿™ä¸ªå¯¹è±¡ç°åœ¨å·²ç»æ›´æ–°ä¸º `[1,2,3,4,5]`).

---

### \> `is` is not what it is!/å‡ºäººæ„æ–™çš„`is`!

ä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨äº’è”ç½‘ä¸Šéå¸¸æœ‰åçš„ä¾‹å­.

\>>\> a \= 256
\>>\> b \= 256
\>>\> a is b
True

\>>\> a \= 257
\>>\> b \= 257
\>>\> a is b
False

\>>\> a \= 257; b \= 257
\>>\> a is b
True

#### ğŸ’¡ è¯´æ˜:

**`is` å’Œ `==` çš„åŒºåˆ«**

- `is` è¿ç®—ç¬¦æ£€æŸ¥ä¸¤ä¸ªè¿ç®—å¯¹è±¡æ˜¯å¦å¼•ç”¨è‡ªåŒä¸€å¯¹è±¡ (å³, å®ƒæ£€æŸ¥ä¸¤ä¸ªè¿ç®—å¯¹è±¡æ˜¯å¦ç›¸åŒ).
- `==` è¿ç®—ç¬¦æ¯”è¾ƒä¸¤ä¸ªè¿ç®—å¯¹è±¡çš„å€¼æ˜¯å¦ç›¸ç­‰.
- å› æ­¤ `is` ä»£è¡¨å¼•ç”¨ç›¸åŒ, `==` ä»£è¡¨å€¼ç›¸ç­‰. ä¸‹é¢çš„ä¾‹å­å¯ä»¥å¾ˆå¥½çš„è¯´æ˜è¿™ç‚¹,

  \>>\> \[\] \== \[\]
  True
  \>>\> \[\] is \[\] \# è¿™ä¸¤ä¸ªç©ºåˆ—è¡¨ä½äºä¸åŒçš„å†…å­˜åœ°å€.
  False

**`256` æ˜¯ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡, è€Œ `257` ä¸æ˜¯**

å½“ä½ å¯åŠ¨ Python çš„æ—¶å€™, æ•°å€¼ä¸º `-5` åˆ° `256` çš„å¯¹è±¡å°±å·²ç»è¢«åˆ†é…å¥½äº†. è¿™äº›æ•°å­—å› ä¸ºç»å¸¸è¢«ä½¿ç”¨, æ‰€ä»¥ä¼šè¢«æå‰å‡†å¤‡å¥½.

Python é€šè¿‡è¿™ç§åˆ›å»ºå°æ•´æ•°æ± çš„æ–¹å¼æ¥é¿å…å°æ•´æ•°é¢‘ç¹çš„ç”³è¯·å’Œé”€æ¯å†…å­˜ç©ºé—´.

å¼•ç”¨è‡ª [https://docs.python.org/3/c-api/long.html](https://docs.python.org/3/c-api/long.html)

> å½“å‰çš„å®ç°ä¸º-5 åˆ° 256 ä¹‹é—´çš„æ‰€æœ‰æ•´æ•°ä¿ç•™ä¸€ä¸ªæ•´æ•°å¯¹è±¡æ•°ç»„, å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªè¯¥èŒƒå›´å†…çš„æ•´æ•°æ—¶, ä½ åªéœ€è¦è¿”å›ç°æœ‰å¯¹è±¡çš„å¼•ç”¨. æ‰€ä»¥æ”¹å˜ 1 çš„å€¼æ˜¯æœ‰å¯èƒ½çš„. æˆ‘æ€€ç–‘è¿™ç§è¡Œä¸ºåœ¨ Python ä¸­æ˜¯æœªå®šä¹‰è¡Œä¸º. :-)

\>>\> id(256)
10922528
\>>\> a \= 256
\>>\> b \= 256
\>>\> id(a)
10922528
\>>\> id(b)
10922528
\>>\> id(257)
140084850247312
\>>\> x \= 257
\>>\> y \= 257
\>>\> id(x)
140084850247440
\>>\> id(y)
140084850247344

è¿™é‡Œè§£é‡Šå™¨å¹¶æ²¡æœ‰æ™ºèƒ½åˆ°èƒ½åœ¨æ‰§è¡Œ `y = 257` æ—¶æ„è¯†åˆ°æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ•´æ•° `257`, æ‰€ä»¥å®ƒåœ¨å†…å­˜ä¸­åˆæ–°å»ºäº†å¦ä¸€ä¸ªå¯¹è±¡.

**å½“ `a` å’Œ `b` åœ¨åŒä¸€è¡Œä¸­ä½¿ç”¨ç›¸åŒçš„å€¼åˆå§‹åŒ–æ—¶ï¼Œä¼šæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡.**

\>>\> a, b \= 257, 257
\>>\> id(a)
140640774013296
\>>\> id(b)
140640774013296
\>>\> a \= 257
\>>\> b \= 257
\>>\> id(a)
140640774013392
\>>\> id(b)
140640774013488

- å½“ a å’Œ b åœ¨åŒä¸€è¡Œä¸­è¢«è®¾ç½®ä¸º `257` æ—¶, Python è§£é‡Šå™¨ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡, ç„¶ååŒæ—¶å¼•ç”¨ç¬¬äºŒä¸ªå˜é‡. å¦‚æœä½ åœ¨ä¸åŒçš„è¡Œä¸Šè¿›è¡Œ, å®ƒå°±ä¸ä¼š "çŸ¥é“" å·²ç»å­˜åœ¨ä¸€ä¸ª `257` å¯¹è±¡äº†.
- è¿™æ˜¯ä¸€ç§ç‰¹åˆ«ä¸ºäº¤äº’å¼ç¯å¢ƒåšçš„ç¼–è¯‘å™¨ä¼˜åŒ–. å½“ä½ åœ¨å®æ—¶è§£é‡Šå™¨ä¸­è¾“å…¥ä¸¤è¡Œçš„æ—¶å€™, ä»–ä»¬ä¼šå•ç‹¬ç¼–è¯‘, å› æ­¤ä¹Ÿä¼šå•ç‹¬è¿›è¡Œä¼˜åŒ–. å¦‚æœä½ åœ¨ `.py` æ–‡ä»¶ä¸­å°è¯•è¿™ä¸ªä¾‹å­, åˆ™ä¸ä¼šçœ‹åˆ°ç›¸åŒçš„è¡Œä¸º, å› ä¸ºæ–‡ä»¶æ˜¯ä¸€æ¬¡æ€§ç¼–è¯‘çš„.

---

### \> A tic-tac-toe where X wins in the first attempt!/ä¸€è¹´å³è‡³!

\# æˆ‘ä»¬å…ˆåˆå§‹åŒ–ä¸€ä¸ªå˜é‡ row
row \= \[""\]\*3 \#row i\['', '', ''\]
\# å¹¶åˆ›å»ºä¸€ä¸ªå˜é‡ board
board \= \[row\]\*3

**Output:**

\>>\> board
\[\['', '', ''\], \['', '', ''\], \['', '', ''\]\]
\>>\> board\[0\]
\['', '', ''\]
\>>\> board\[0\]\[0\]
''
\>>\> board\[0\]\[0\] \= "X"
\>>\> board
\[\['X', '', ''\], \['X', '', ''\], \['X', '', ''\]\]

æˆ‘ä»¬æœ‰æ²¡æœ‰èµ‹å€¼è¿‡ 3 ä¸ª "X" å‘¢ï¼Ÿ

#### ğŸ’¡ è¯´æ˜:

å½“æˆ‘ä»¬åˆå§‹åŒ– `row` å˜é‡æ—¶, ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†å†…å­˜ä¸­çš„æƒ…å†µã€‚

[![image](https://github.com/leisurelicht/wtfpython-cn/raw/master/images/tic-tac-toe/after_row_initialized.png)](https://github.com/leisurelicht/wtfpython-cn/blob/master/images/tic-tac-toe/after_row_initialized.png)

è€Œå½“é€šè¿‡å¯¹ `row` åšä¹˜æ³•æ¥åˆå§‹åŒ– `board` æ—¶, å†…å­˜ä¸­çš„æƒ…å†µåˆ™å¦‚ä¸‹å›¾æ‰€ç¤º (æ¯ä¸ªå…ƒç´  `board[0]`, `board[1]` å’Œ `board[2]` éƒ½å’Œ `row` ä¸€æ ·å¼•ç”¨äº†åŒä¸€åˆ—è¡¨.)

[![image](https://github.com/leisurelicht/wtfpython-cn/raw/master/images/tic-tac-toe/after_board_initialized.png)](https://github.com/leisurelicht/wtfpython-cn/blob/master/images/tic-tac-toe/after_board_initialized.png)

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸ä½¿ç”¨å˜é‡ `row` ç”Ÿæˆ `board` æ¥é¿å…è¿™ç§æƒ…å†µ. ([è¿™ä¸ª](https://github.com/satwikkansal/wtfpython/issues/68)issue æå‡ºäº†è¿™ä¸ªéœ€æ±‚.)

\>>\> board \= \[\[''\]\*3 for \_ in range(3)\]
\>>\> board\[0\]\[0\] \= "X"
\>>\> board
\[\['X', '', ''\], \['', '', ''\], \['', '', ''\]\]

---

### \> The sticky output function/éº»çƒ¦çš„è¾“å‡º

funcs \= \[\]
results \= \[\]
for x in range(7):
def some_func():
return x
funcs.append(some_func)
results.append(some_func()) \# æ³¨æ„è¿™é‡Œå‡½æ•°è¢«æ‰§è¡Œäº†

funcs_results \= \[func() for func in funcs\]

**Output:**

\>>\> results
\[0, 1, 2, 3, 4, 5, 6\]
\>>\> funcs_results
\[6, 6, 6, 6, 6, 6, 6\]

å³ä½¿æ¯æ¬¡åœ¨è¿­ä»£ä¸­å°† `some_func` åŠ å…¥ `funcs` å‰çš„ `x` å€¼éƒ½ä¸ç›¸åŒ, æ‰€æœ‰çš„å‡½æ•°è¿˜æ˜¯éƒ½è¿”å› 6.

// å†æ¢ä¸ªä¾‹å­

\>>\> powers_of_x \= \[lambda x: x\*\*i for i in range(10)\]
\>>\> \[f(2) for f in powers_of_x\]
\[512, 512, 512, 512, 512, 512, 512, 512, 512, 512\]

#### ğŸ’¡ è¯´æ˜:

- å½“åœ¨å¾ªç¯å†…éƒ¨å®šä¹‰ä¸€ä¸ªå‡½æ•°æ—¶, å¦‚æœè¯¥å‡½æ•°åœ¨å…¶ä¸»ä½“ä¸­ä½¿ç”¨äº†å¾ªç¯å˜é‡, åˆ™é—­åŒ…å‡½æ•°å°†ä¸å¾ªç¯å˜é‡ç»‘å®š, è€Œä¸æ˜¯å®ƒçš„å€¼. å› æ­¤, æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯ä½¿ç”¨æœ€ååˆ†é…ç»™å˜é‡çš„å€¼æ¥è¿›è¡Œè®¡ç®—çš„.
- å¯ä»¥é€šè¿‡å°†å¾ªç¯å˜é‡ä½œä¸ºå‘½åå˜é‡ä¼ é€’ç»™å‡½æ•°æ¥è·å¾—é¢„æœŸçš„ç»“æœ. **ä¸ºä»€ä¹ˆè¿™æ ·å¯è¡Œ?** å› ä¸ºè¿™ä¼šåœ¨å‡½æ•°å†…å†æ¬¡å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡.

  funcs \= \[\]
  for x in range(7):
  def some_func(x\=x):
  return x
  funcs.append(some_func)

  **Output:**

  \>>\> funcs_results \= \[func() for func in funcs\]
  \>>\> funcs_results
  \[0, 1, 2, 3, 4, 5, 6\]

---

### \> `is not ...` is not `is (not ...)`/`is not ...` ä¸æ˜¯ `is (not ...)`

\>>\> 'something' is not None
True
\>>\> 'something' is (not None)
False

#### ğŸ’¡ è¯´æ˜:

- `is not` æ˜¯ä¸ªå•ç‹¬çš„äºŒå…ƒè¿ç®—ç¬¦, ä¸åˆ†åˆ«ä½¿ç”¨ `is` å’Œ `not` ä¸åŒ.
- å¦‚æœæ“ä½œç¬¦ä¸¤ä¾§çš„å˜é‡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡, åˆ™ `is not` çš„ç»“æœä¸º `False`, å¦åˆ™ç»“æœä¸º `True`.

---

### \> The surprising comma/æ„å¤–çš„é€—å·

**Output:**

\>>\> def f(x, y,):
... print(x, y)
...
\>>\> def g(x\=4, y\=5,):
... print(x, y)
...
\>>\> def h(x, \*\*kwargs,):
File "<stdin>", line 1
def h(x, \*\*kwargs,):
^
SyntaxError: invalid syntax
\>>\> def h(\*args,):
File "<stdin>", line 1
def h(\*args,):
^
SyntaxError: invalid syntax

#### ğŸ’¡ è¯´æ˜:

- åœ¨ Python å‡½æ•°çš„å½¢å¼å‚æ•°åˆ—è¡¨ä¸­, å°¾éšé€—å·å¹¶ä¸ä¸€å®šæ˜¯åˆæ³•çš„.
- åœ¨ Python ä¸­, å‚æ•°åˆ—è¡¨éƒ¨åˆ†ç”¨å‰ç½®é€—å·å®šä¹‰, éƒ¨åˆ†ç”¨å°¾éšé€—å·å®šä¹‰. è¿™ç§å†²çªå¯¼è‡´é€—å·è¢«å¤¹åœ¨ä¸­é—´, æ²¡æœ‰è§„åˆ™å®šä¹‰å®ƒ.(è¯‘:è¿™ä¸€å¥çœ‹å¾—æˆ‘ä¹Ÿå¾ˆæ‡µé€¼,åªèƒ½å¼ºç¿»äº†.è¯¦ç»†è§£é‡Šçœ‹ä¸‹é¢çš„è®¨è®ºå¸–ä¼šä¸€ç›®äº†ç„¶.)
- **æ³¨æ„:** å°¾éšé€—å·çš„é—®é¢˜å·²ç»åœ¨ Python 3.6 ä¸­è¢«[ä¿®å¤](https://bugs.python.org/issue9232)äº†. è€Œè¿™ç¯‡[å¸–å­](https://bugs.python.org/issue9232#msg248399)ä¸­åˆ™ç®€è¦è®¨è®ºäº† Python ä¸­å°¾éšé€—å·çš„ä¸åŒç”¨æ³•.

---

### \> Backslashes at the end of string/å­—ç¬¦ä¸²æœ«å°¾çš„åæ–œæ 

**Output:**

```
>>> print("\\ C:\\")
\ C:\
>>> print(r"\ C:")
\ C:
>>> print(r"\ C:\")

    File "<stdin>", line 1
      print(r"\ C:\")
                     ^
SyntaxError: EOL while scanning string literal
```

#### ğŸ’¡ è¯´æ˜:

- åœ¨ä»¥ `r` å¼€å¤´çš„åŸå§‹å­—ç¬¦ä¸²ä¸­, åæ–œæ å¹¶æ²¡æœ‰ç‰¹æ®Šå«ä¹‰.

  \>>\> print(repr(r"wt\\"f"))
  'wt\\\\"f'

- è§£é‡Šå™¨æ‰€åšçš„åªæ˜¯ç®€å•çš„æ”¹å˜äº†åæ–œæ çš„è¡Œä¸º, å› æ­¤ä¼šç›´æ¥æ”¾è¡Œåæ–œæ åŠåä¸€ä¸ªçš„å­—ç¬¦. è¿™å°±æ˜¯åæ–œæ åœ¨åŸå§‹å­—ç¬¦ä¸²æœ«å°¾ä¸èµ·ä½œç”¨çš„åŸå› .

---

### \> not knot!/åˆ«çº ç»“!

**Output:**

\>>\> not x \== y
True
\>>\> x \== not y
File "<input>", line 1
x \== not y
^
SyntaxError: invalid syntax

#### ğŸ’¡ è¯´æ˜:

- è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ä¼šå½±å“è¡¨è¾¾å¼çš„æ±‚å€¼é¡ºåº, è€Œåœ¨ Python ä¸­ `==` è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§è¦é«˜äº `not` è¿ç®—ç¬¦.
- æ‰€ä»¥ `not x == y` ç›¸å½“äº `not (x == y)`, åŒæ—¶ç­‰ä»·äº `not (True == False)`, æœ€åçš„è¿ç®—ç»“æœå°±æ˜¯ `True`.
- ä¹‹æ‰€ä»¥ `x == not y` ä¼šæŠ›ä¸€ä¸ª `SyntaxError` å¼‚å¸¸, æ˜¯å› ä¸ºå®ƒä¼šè¢«è®¤ä¸ºç­‰ä»·äº `(x == not) y`, è€Œä¸æ˜¯ä½ ä¸€å¼€å§‹æœŸæœ›çš„ `x == (not y)`.
- è§£é‡Šå™¨æœŸæœ› `not` æ ‡è®°æ˜¯ `not in` æ“ä½œç¬¦çš„ä¸€éƒ¨åˆ† (å› ä¸º `==` å’Œ `not in` æ“ä½œç¬¦å…·æœ‰ç›¸åŒçš„ä¼˜å…ˆçº§), ä½†æ˜¯å®ƒåœ¨ `not` æ ‡è®°åé¢æ‰¾ä¸åˆ° `in` æ ‡è®°, æ‰€ä»¥ä¼šæŠ›å‡º `SyntaxError` å¼‚å¸¸.

---

### \> Half triple-quoted strings/ä¸‰ä¸ªå¼•å·

**Output:**

\>>\> print('wtfpython''')
wtfpython
\>>\> print("wtfpython""")
wtfpython
\>>\> \# ä¸‹é¢çš„è¯­å¥ä¼šæŠ›å‡º \`SyntaxError\` å¼‚å¸¸
\>>\> \# print('''wtfpython')
\>>\> \# print("""wtfpython")

#### ğŸ’¡ è¯´æ˜:

- Python æä¾›éšå¼çš„[å­—ç¬¦ä¸²è¿æ¥](https://docs.python.org/2/reference/lexical_analysis.html#string-literal-concatenation), ä¾‹å¦‚,

  ```
  >>> print("wtf" "python")
  wtfpython
  >>> print("wtf" "") # or "wtf"""
  wtf
  ```

- `'''` å’Œ `"""` åœ¨ Python ä¸­ä¹Ÿæ˜¯å­—ç¬¦ä¸²å®šç•Œç¬¦, Python è§£é‡Šå™¨åœ¨å…ˆé‡åˆ°ä¸‰ä¸ªå¼•å·çš„çš„æ—¶å€™ä¼šå°è¯•å†å¯»æ‰¾ä¸‰ä¸ªç»ˆæ­¢å¼•å·ä½œä¸ºå®šç•Œç¬¦, å¦‚æœä¸å­˜åœ¨åˆ™ä¼šå¯¼è‡´ `SyntaxError` å¼‚å¸¸.

---

### \> Midnight time doesn't exist?/ä¸å­˜åœ¨çš„åˆå¤œ?

from datetime import datetime

midnight \= datetime(2018, 1, 1, 0, 0)
midnight_time \= midnight.time()

noon \= datetime(2018, 1, 1, 12, 0)
noon_time \= noon.time()

if midnight_time:
print("Time at midnight is", midnight_time)

if noon_time:
print("Time at noon is", noon_time)

**Output:**

('Time at noon is', datetime.time(12, 0))

midnight_time å¹¶æ²¡æœ‰è¢«è¾“å‡º.

#### ğŸ’¡ è¯´æ˜:

åœ¨ Python 3.5 ä¹‹å‰, å¦‚æœ `datetime.time` å¯¹è±¡å­˜å‚¨çš„ UTC çš„åˆå¤œæ—¶é—´(è¯‘: å°±æ˜¯ `00:00`), é‚£ä¹ˆå®ƒçš„å¸ƒå°”å€¼ä¼šè¢«è®¤ä¸ºæ˜¯ `False`. å½“ä½¿ç”¨ `if obj:` è¯­å¥æ¥æ£€æŸ¥ `obj` æ˜¯å¦ä¸º `null` æˆ–è€…æŸäº›â€œç©ºâ€å€¼çš„æ—¶å€™, å¾ˆå®¹æ˜“å‡ºé”™.

---

### \> What's wrong with booleans?/å¸ƒå°”ä½ å’‹äº†?

1.

\# ä¸€ä¸ªç®€å•çš„ä¾‹å­, ç»Ÿè®¡ä¸‹é¢å¯è¿­ä»£å¯¹è±¡ä¸­çš„å¸ƒå°”å‹å€¼çš„ä¸ªæ•°å’Œæ•´å‹å€¼çš„ä¸ªæ•°
mixed_list \= \[False, 1.0, "some_string", 3, True, \[\], False\]
integers_found_so_far \= 0
booleans_found_so_far \= 0

for item in mixed_list:
if isinstance(item, int):
integers_found_so_far += 1
elif isinstance(item, bool):
booleans_found_so_far += 1

**Output:**

\>>\> integers_found_so_far
4
\>>\> booleans_found_so_far
0

2.

another_dict \= {}
another_dict\[True\] \= "JavaScript"
another_dict\[1\] \= "Ruby"
another_dict\[1.0\] \= "Python"

**Output:**

\>>\> another_dict\[True\]
"Python"

3.

\>>\> some_bool \= True
\>>\> "wtf"\*some_bool
'wtf'
\>>\> some_bool \= False
\>>\> "wtf"\*some_bool
''

#### ğŸ’¡ è¯´æ˜:

- å¸ƒå°”å€¼æ˜¯ `int` çš„å­ç±»

  \>>\> isinstance(True, int)
  True
  \>>\> isinstance(False, int)
  True

- æ‰€ä»¥ `True` çš„æ•´æ•°å€¼æ˜¯ `1`, è€Œ `False` çš„æ•´æ•°å€¼æ˜¯ `0`.

  \>>\> True \== 1 \== 1.0 and False \== 0 \== 0.0
  True

- å…³äºå…¶èƒŒåçš„åŸç†, è¯·çœ‹è¿™ä¸ª StackOverflow çš„[å›ç­”](https://stackoverflow.com/a/8169049/4354153).

---

### \> Class attributes and instance attributes/ç±»å±æ€§å’Œå®ä¾‹å±æ€§

1.

class A:
x \= 1

class B(A):
pass

class C(A):
pass

**Output:**

\>>\> A.x, B.x, C.x
(1, 1, 1)
\>>\> B.x \= 2
\>>\> A.x, B.x, C.x
(1, 2, 1)
\>>\> A.x \= 3
\>>\> A.x, B.x, C.x
(3, 2, 3)
\>>\> a \= A()
\>>\> a.x, A.x
(3, 3)
\>>\> a.x += 1
\>>\> a.x, A.x
(4, 3)

2.

class SomeClass:
some_var \= 15
some_list \= \[5\]
another_list \= \[5\]
def \_\_init\_\_(self, x):
self.some_var \= x + 1
self.some_list \= self.some_list + \[x\]
self.another_list += \[x\]

**Output:**

\>>\> some_obj \= SomeClass(420)
\>>\> some_obj.some_list
\[5, 420\]
\>>\> some_obj.another_list
\[5, 420\]
\>>\> another_obj \= SomeClass(111)
\>>\> another_obj.some_list
\[5, 111\]
\>>\> another_obj.another_list
\[5, 420, 111\]
\>>\> another_obj.another_list is SomeClass.another_list
True
\>>\> another_obj.another_list is some_obj.another_list
True

#### ğŸ’¡ è¯´æ˜:

- ç±»å˜é‡å’Œå®ä¾‹å˜é‡åœ¨å†…éƒ¨æ˜¯é€šè¿‡ç±»å¯¹è±¡çš„å­—å…¸æ¥å¤„ç†(è¯‘: å°±æ˜¯ `__dict__` å±æ€§). å¦‚æœåœ¨å½“å‰ç±»çš„å­—å…¸ä¸­æ‰¾ä¸åˆ°çš„è¯å°±å»å®ƒçš„çˆ¶ç±»ä¸­å¯»æ‰¾.
- `+=` è¿ç®—ç¬¦ä¼šåœ¨åŸåœ°ä¿®æ”¹å¯å˜å¯¹è±¡, è€Œä¸æ˜¯åˆ›å»ºæ–°å¯¹è±¡. å› æ­¤, åœ¨è¿™ç§æƒ…å†µä¸‹, ä¿®æ”¹ä¸€ä¸ªå®ä¾‹çš„å±æ€§ä¼šå½±å“å…¶ä»–å®ä¾‹å’Œç±»å±æ€§.

---

### \> yielding None/ç”Ÿæˆ None

some_iterable \= ('a', 'b')

def some_func(val):
return "something"

**Output:**

\>>\> \[x for x in some_iterable\]
\['a', 'b'\]
\>>\> \[(yield x) for x in some_iterable\]
<generator object <listcomp\> at 0x7f70b0a4ad58\>
\>>\> list(\[(yield x) for x in some_iterable\])
\['a', 'b'\]
\>>\> list((yield x) for x in some_iterable)
\['a', None, 'b', None\]
\>>\> list(some_func((yield x)) for x in some_iterable)
\['a', 'something', 'b', 'something'\]

#### ğŸ’¡ è¯´æ˜:

- æ¥æºå’Œè§£é‡Šå¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°: [https://stackoverflow.com/questions/32139885/yield-in-list-comprehensions-and-generator-expressions](https://stackoverflow.com/questions/32139885/yield-in-list-comprehensions-and-generator-expressions)
- ç›¸å…³é”™è¯¯æŠ¥å‘Š: [http://bugs.python.org/issue10544](http://bugs.python.org/issue10544)
- è¿™ä¸ª bug åœ¨ 3.7 ä»¥åçš„ç‰ˆæœ¬ä¸­ä¸è¢«æ¨èä½¿ç”¨, å¹¶åœ¨ 3.8 ä¸­è¢«ä¿®å¤. å› æ­¤åœ¨ 3.8 ä¸­å°è¯•åœ¨æ¨å¯¼å¼ä¸­ä½¿ç”¨ yield, åªä¼šå¾—åˆ°ä¸€ä¸ª SyntaxError. è¯¦ç»†å†…å®¹å¯ä»¥çœ‹[3.7 æ›´æ–°å†…å®¹](https://docs.python.org/dev/whatsnew/3.7.html#deprecated-python-behavior), [3.8 æ›´æ–°å†…å®¹](https://docs.python.org/dev/whatsnew/3.8.html#changes-in-python-behavior).

---

### \> Mutating the immutable!/å¼ºäººæ‰€éš¾

some_tuple \= ("A", "tuple", "with", "values")
another_tuple \= (\[1, 2\], \[3, 4\], \[5, 6\])

**Output:**

\>>\> some_tuple\[2\] \= "change this"
TypeError: 'tuple' object does not support item assignment
\>>\> another_tuple\[2\].append(1000) \# è¿™é‡Œä¸å‡ºç°é”™è¯¯
\>>\> another_tuple
(\[1, 2\], \[3, 4\], \[5, 6, 1000\])
\>>\> another_tuple\[2\] += \[99, 999\]
TypeError: 'tuple' object does not support item assignment
\>>\> another_tuple
(\[1, 2\], \[3, 4\], \[5, 6, 1000, 99, 999\])

æˆ‘è¿˜ä»¥ä¸ºå…ƒç»„æ˜¯ä¸å¯å˜çš„å‘¢...

#### ğŸ’¡ è¯´æ˜:

- å¼•ç”¨ [https://docs.python.org/2/reference/datamodel.html](https://docs.python.org/2/reference/datamodel.html)

  > ä¸å¯å˜åºåˆ— ä¸å¯å˜åºåˆ—çš„å¯¹è±¡ä¸€æ—¦åˆ›å»ºå°±ä¸èƒ½å†æ”¹å˜. (å¦‚æœå¯¹è±¡åŒ…å«å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ï¼Œåˆ™è¿™äº›å…¶ä»–å¯¹è±¡å¯èƒ½æ˜¯å¯å˜çš„å¹¶ä¸”å¯èƒ½ä¼šè¢«ä¿®æ”¹; ä½†æ˜¯ï¼Œç”±ä¸å¯å˜å¯¹è±¡ç›´æ¥å¼•ç”¨çš„å¯¹è±¡é›†åˆä¸èƒ½æ›´æ”¹.)

- `+=` æ“ä½œç¬¦åœ¨åŸåœ°ä¿®æ”¹äº†åˆ—è¡¨. å…ƒç´ èµ‹å€¼æ“ä½œå¹¶ä¸å·¥ä½œ, ä½†æ˜¯å½“å¼‚å¸¸æŠ›å‡ºæ—¶, å…ƒç´ å·²ç»åœ¨åŸåœ°è¢«ä¿®æ”¹äº†.

(è¯‘: å¯¹äºä¸å¯å˜å¯¹è±¡, è¿™é‡ŒæŒ‡ tuple, `+=` å¹¶ä¸æ˜¯åŸå­æ“ä½œ, è€Œæ˜¯ `extend` å’Œ `=` ä¸¤ä¸ªåŠ¨ä½œ, è¿™é‡Œ `=` æ“ä½œè™½ç„¶ä¼šæŠ›å‡ºå¼‚å¸¸, ä½† `extend` æ“ä½œå·²ç»ä¿®æ”¹æˆåŠŸäº†. è¯¦ç»†è§£é‡Šå¯ä»¥çœ‹[è¿™é‡Œ](https://segmentfault.com/a/1190000010767068))

---

### \> The disappearing variable from outer scope/æ¶ˆå¤±çš„å¤–éƒ¨å˜é‡

e \= 7
try:
raise Exception()
except Exception as e:
pass

**Output (Python 2.x):**

\>>\> print(e)
\# prints nothing

**Output (Python 3.x):**

\>>\> print(e)
NameError: name 'e' is not defined

#### ğŸ’¡ è¯´æ˜:

- å‡ºå¤„: [https://docs.python.org/3/reference/compound_stmts.html#except](https://docs.python.org/3/reference/compound_stmts.html#except)

  å½“ä½¿ç”¨ `as` ä¸ºç›®æ ‡åˆ†é…å¼‚å¸¸çš„æ—¶å€™, å°†åœ¨ except å­å¥çš„æœ«å°¾æ¸…é™¤è¯¥å¼‚å¸¸.

  è¿™å°±å¥½åƒ

  ä¼šè¢«ç¿»è¯‘æˆ

  except E as N:
  try:
  foo
  finally:
  del N

  è¿™æ„å‘³ç€å¼‚å¸¸å¿…é¡»åœ¨è¢«èµ‹å€¼ç»™å…¶ä»–å˜é‡æ‰èƒ½åœ¨ `except` å­å¥ä¹‹åå¼•ç”¨å®ƒ. è€Œå¼‚å¸¸ä¹‹æ‰€ä»¥ä¼šè¢«æ¸…é™¤, åˆ™æ˜¯ç”±äºä¸Šé¢é™„åŠ çš„å›æº¯ä¿¡æ¯(trackback)ä¼šå’Œæ ˆå¸§(stack frame)å½¢æˆå¾ªç¯å¼•ç”¨, ä½¿å¾—è¯¥æ ˆå¸§ä¸­çš„æ‰€æœ‰æœ¬åœ°å˜é‡åœ¨ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶å‘ç”Ÿä¹‹å‰éƒ½å¤„äºæ´»åŠ¨çŠ¶æ€.(è¯‘: ä¹Ÿå°±æ˜¯è¯´ä¸ä¼šè¢«å›æ”¶)

- å­å¥åœ¨ Python ä¸­å¹¶æ²¡æœ‰ç‹¬ç«‹çš„ä½œç”¨åŸŸ. ç¤ºä¾‹ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½å¤„äºåŒä¸€ä½œç”¨åŸŸå†…, æ‰€ä»¥å˜é‡ `e` ä¼šç”±äºæ‰§è¡Œäº† `except` å­å¥è€Œè¢«åˆ é™¤. è€Œå¯¹äºæœ‰ç‹¬ç«‹çš„å†…éƒ¨ä½œç”¨åŸŸçš„å‡½æ•°æ¥è¯´æƒ…å†µå°±ä¸ä¸€æ ·äº†. ä¸‹é¢çš„ä¾‹å­è¯´æ˜äº†è¿™ä¸€ç‚¹:

  def f(x):
  del(x)
  print(x)

  x \= 5
  y \= \[5, 4, 3\]

  **Output:**

  \>>\>f(x)
  UnboundLocalError: local variable 'x' referenced before assignment
  \>>\>f(y)
  UnboundLocalError: local variable 'x' referenced before assignment
  \>>\> x
  5
  \>>\> y
  \[5, 4, 3\]

- åœ¨ Python 2.x ä¸­, `Exception()` å®ä¾‹è¢«èµ‹å€¼ç»™äº†å˜é‡ `e`, æ‰€ä»¥å½“ä½ å°è¯•æ‰“å°ç»“æœçš„æ—¶å€™, å®ƒçš„è¾“å‡ºä¸ºç©º.ï¼ˆè¯‘: æ­£å¸¸çš„ Exception å®ä¾‹æ‰“å°å‡ºæ¥å°±æ˜¯ç©ºï¼‰

  **Output (Python 2.x):**

  \>>\> e
  Exception()
  \>>\> print e
  \# æ²¡æœ‰æ‰“å°ä»»ä½•å†…å®¹!

---

### \> When True is actually False/çœŸäº¦å‡

True \= False
if True \== False:
print("I've lost faith in truth!")

**Output:**

```
I've lost faith in truth!
```

#### ğŸ’¡ è¯´æ˜:

- æœ€åˆ, Python å¹¶æ²¡æœ‰ `bool` å‹ (äººä»¬ç”¨ 0 è¡¨ç¤ºå‡å€¼, ç”¨éé›¶å€¼æ¯”å¦‚ 1 ä½œä¸ºçœŸå€¼). åæ¥ä»–ä»¬æ·»åŠ äº† `True`, `False`, å’Œ `bool` å‹, ä½†æ˜¯, ä¸ºäº†å‘åå…¼å®¹, ä»–ä»¬æ²¡æ³•æŠŠ `True` å’Œ `False` è®¾ç½®ä¸ºå¸¸é‡, åªæ˜¯è®¾ç½®æˆäº†å†…ç½®å˜é‡.
- Python 3 ç”±äºä¸å†éœ€è¦å‘åå…¼å®¹, ç»ˆäºå¯ä»¥ä¿®å¤è¿™ä¸ªé—®é¢˜äº†, æ‰€ä»¥è¿™ä¸ªä¾‹å­æ— æ³•åœ¨ Python 3.x ä¸­æ‰§è¡Œ!

---

### \> From filled to None in one instruction.../ä»æœ‰åˆ°æ— ...

some_list \= \[1, 2, 3\]
some_dict \= {
"key_1": 1,
"key_2": 2,
"key_3": 3
}

some_list \= some_list.append(4)
some_dict \= some_dict.update({"key_4": 4})

**Output:**

\>>\> print(some_list)
None
\>>\> print(some_dict)
None

#### ğŸ’¡ è¯´æ˜:

å¤§å¤šæ•°ä¿®æ”¹åºåˆ—/æ˜ å°„å¯¹è±¡çš„æ–¹æ³•, æ¯”å¦‚ `list.append`, `dict.update`, `list.sort` ç­‰ç­‰. éƒ½æ˜¯åŸåœ°ä¿®æ”¹å¯¹è±¡å¹¶è¿”å› `None`. è¿™æ ·åšçš„ç†ç”±æ˜¯, å¦‚æœæ“ä½œå¯ä»¥åŸåœ°å®Œæˆ, å°±å¯ä»¥é¿å…åˆ›å»ºå¯¹è±¡çš„å‰¯æœ¬æ¥æé«˜æ€§èƒ½. (å‚è€ƒ[è¿™é‡Œ](http://docs.python.org/2/faq/design.html#why-doesn-t-list-sort-return-the-sorted-list))

---

### \> Subclass relationships/å­ç±»å…³ç³» \*

**Output:**

\>>\> from collections import Hashable
\>>\> issubclass(list, object)
True
\>>\> issubclass(object, Hashable)
True
\>>\> issubclass(list, Hashable)
False

å­ç±»å…³ç³»åº”è¯¥æ˜¯å¯ä¼ é€’çš„, å¯¹å§? (å³, å¦‚æœ `A` æ˜¯ `B` çš„å­ç±», `B` æ˜¯ `C` çš„å­ç±», é‚£ä¹ˆ `A` _åº”è¯¥_ æ˜¯ `C` çš„å­ç±».)

#### ğŸ’¡ è¯´æ˜:

- Python ä¸­çš„å­ç±»å…³ç³»å¹¶ä¸ä¸€å®šæ˜¯ä¼ é€’çš„. ä»»ä½•äººéƒ½å¯ä»¥åœ¨å…ƒç±»ä¸­éšæ„å®šä¹‰ `__subclasscheck__`.
- å½“ `issubclass(cls, Hashable)` è¢«è°ƒç”¨æ—¶, å®ƒåªæ˜¯åœ¨ `cls` ä¸­å¯»æ‰¾ `__hash__` æ–¹æ³•æˆ–è€…ä»ç»§æ‰¿çš„çˆ¶ç±»ä¸­å¯»æ‰¾ `__hash__` æ–¹æ³•.
- ç”±äº `object` is å¯æ•£åˆ—çš„(hashable), ä½†æ˜¯ `list` æ˜¯ä¸å¯æ•£åˆ—çš„, æ‰€ä»¥å®ƒæ‰“ç ´äº†è¿™ç§ä¼ é€’å…³ç³».
- åœ¨[è¿™é‡Œ](https://www.naftaliharris.com/blog/python-subclass-intransitivity/)å¯ä»¥æ‰¾åˆ°æ›´è¯¦ç»†çš„è§£é‡Š.

---

### \> The mysterious key type conversion/ç¥ç§˜çš„é”®å‹è½¬æ¢ \*

class SomeClass(str):
pass

some_dict \= {'s':42}

**Output:**

\>>\> type(list(some_dict.keys())\[0\])
str
\>>\> s \= SomeClass('s')
\>>\> some_dict\[s\] \= 40
\>>\> some_dict \# é¢„æœŸ: ä¸¤ä¸ªä¸åŒçš„é”®å€¼å¯¹
{'s': 40}
\>>\> type(list(some_dict.keys())\[0\])
str

#### ğŸ’¡ è¯´æ˜:

- ç”±äº `SomeClass` ä¼šä» `str` è‡ªåŠ¨ç»§æ‰¿ `__hash__` æ–¹æ³•, æ‰€ä»¥ `s` å¯¹è±¡å’Œ `"s"` å­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼æ˜¯ç›¸åŒçš„.
- è€Œ `SomeClass("s") == "s"` ä¸º `True` æ˜¯å› ä¸º `SomeClass` ä¹Ÿç»§æ‰¿äº† `str` ç±» `__eq__` æ–¹æ³•.
- ç”±äºä¸¤è€…çš„å“ˆå¸Œå€¼ç›¸åŒä¸”ç›¸ç­‰, æ‰€ä»¥å®ƒä»¬åœ¨å­—å…¸ä¸­è¡¨ç¤ºç›¸åŒçš„é”®.
- å¦‚æœæƒ³è¦å®ç°æœŸæœ›çš„åŠŸèƒ½, æˆ‘ä»¬å¯ä»¥é‡å®šä¹‰ `SomeClass` çš„ `__eq__` æ–¹æ³•.

  class SomeClass(str):
  def \_\_eq\_\_(self, other):
  return (
  type(self) is SomeClass
  and type(other) is SomeClass
  and super().\_\_eq\_\_(other)
  )

  \# å½“æˆ‘ä»¬è‡ªå®šä¹‰ \_\_eq\_\_ æ–¹æ³•æ—¶, Python ä¸ä¼šå†è‡ªåŠ¨ç»§æ‰¿ \_\_hash\_\_ æ–¹æ³•
  \# æ‰€ä»¥æˆ‘ä»¬ä¹Ÿéœ€è¦å®šä¹‰å®ƒ
  \_\_hash\_\_ \= str.\_\_hash\_\_

  some_dict \= {'s':42}

  **Output:**

  \>>\> s \= SomeClass('s')
  \>>\> some_dict\[s\] \= 40
  \>>\> some_dict
  {'s': 40, 's': 42}
  \>>\> keys \= list(some_dict.keys())
  \>>\> type(keys\[0\]), type(keys\[1\])
  (\_\_main\_\_.SomeClass, str)

---

### \> Let's see if you can guess this?/çœ‹çœ‹ä½ èƒ½å¦çŒœåˆ°è¿™ä¸€ç‚¹?

**Output:**

#### ğŸ’¡ è¯´æ˜:

- æ ¹æ® [Python è¯­è¨€å‚è€ƒ](https://docs.python.org/2/reference/simple_stmts.html#assignment-statements), èµ‹å€¼è¯­å¥çš„å½¢å¼å¦‚ä¸‹

  ```
  (target_list "=")+ (expression_list | yield_expression)
  ```

  > èµ‹å€¼è¯­å¥è®¡ç®—è¡¨è¾¾å¼åˆ—è¡¨(expression list)(ç‰¢è®° è¿™å¯ä»¥æ˜¯å•ä¸ªè¡¨è¾¾å¼æˆ–ä»¥é€—å·åˆ†éš”çš„åˆ—è¡¨, åè€…è¿”å›å…ƒç»„)å¹¶å°†å•ä¸ªç»“æœå¯¹è±¡ä»å·¦åˆ°å³åˆ†é…ç»™ç›®æ ‡åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹.

- `(target_list "=")+` ä¸­çš„ `+` æ„å‘³ç€å¯ä»¥æœ‰**ä¸€ä¸ªæˆ–å¤šä¸ª**ç›®æ ‡åˆ—è¡¨. åœ¨è¿™ä¸ªä¾‹å­ä¸­, ç›®æ ‡åˆ—è¡¨æ˜¯ `a, b` å’Œ `a[b]` (æ³¨æ„è¡¨è¾¾å¼åˆ—è¡¨åªèƒ½æœ‰ä¸€ä¸ª, åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ `{}, 5`).
- è¡¨è¾¾å¼åˆ—è¡¨è®¡ç®—ç»“æŸå, å°†å…¶å€¼è‡ªåŠ¨è§£åŒ…å**ä»å·¦åˆ°å³**åˆ†é…ç»™ç›®æ ‡åˆ—è¡¨(target list). å› æ­¤, åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­, é¦–å…ˆå°† `{}, 5` å…ƒç»„å¹¶èµ‹å€¼ç»™ `a, b`, ç„¶åæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ° `a = {}` ä¸” `b = 5`.
- `a` è¢«èµ‹å€¼çš„ `{}` æ˜¯å¯å˜å¯¹è±¡.
- ç¬¬äºŒä¸ªç›®æ ‡åˆ—è¡¨æ˜¯ `a[b]` (ä½ å¯èƒ½è§‰å¾—è¿™é‡Œä¼šæŠ¥é”™, å› ä¸ºåœ¨ä¹‹å‰çš„è¯­å¥ä¸­ `a` å’Œ `b` éƒ½è¿˜æ²¡æœ‰è¢«å®šä¹‰. ä½†æ˜¯åˆ«å¿˜äº†, æˆ‘ä»¬åˆšåˆšå°† `a` èµ‹å€¼ `{}` ä¸”å°† `b` èµ‹å€¼ä¸º `5`).
- ç°åœ¨, æˆ‘ä»¬å°†é€šè¿‡å°†å­—å…¸ä¸­é”® `5` çš„å€¼è®¾ç½®ä¸ºå…ƒç»„ `({}, 5)` æ¥åˆ›å»ºå¾ªç¯å¼•ç”¨ (è¾“å‡ºä¸­çš„ `{...}` æŒ‡ä¸ `a` å¼•ç”¨äº†ç›¸åŒçš„å¯¹è±¡). ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´ç®€å•çš„å¾ªç¯å¼•ç”¨çš„ä¾‹å­

  \>>\> some_list \= some_list\[0\] \= \[0\]
  \>>\> some_list
  \[\[...\]\]
  \>>\> some_list\[0\]
  \[\[...\]\]
  \>>\> some_list is some_list\[0\]
  True
  \>>\> some_list\[0\]\[0\]\[0\]\[0\]\[0\]\[0\] \== some_list
  True

  æˆ‘ä»¬çš„ä¾‹å­å°±æ˜¯è¿™ç§æƒ…å†µ (`a[b][0]` ä¸ `a` æ˜¯ç›¸åŒçš„å¯¹è±¡)

- æ€»ç»“ä¸€ä¸‹, ä½ ä¹Ÿå¯ä»¥æŠŠä¾‹å­æ‹†æˆ

  å¹¶ä¸”å¯ä»¥é€šè¿‡ `a[b][0]` ä¸ `a` æ˜¯ç›¸åŒçš„å¯¹è±¡æ¥è¯æ˜æ˜¯å¾ªç¯å¼•ç”¨

---

---

## Section: Appearances are deceptive!/å¤–è¡¨æ˜¯é ä¸ä½çš„!

### \> Skipping lines?/è·³è¿‡ä¸€è¡Œ?

**Output:**

\>>\> value \= 11
\>>\> valuĞµ \= 32
\>>\> value
11

ä»€ä¹ˆé¬¼?

**æ³¨æ„:** å¦‚æœä½ æƒ³è¦é‡ç°çš„è¯æœ€ç®€å•çš„æ–¹æ³•æ˜¯ç›´æ¥å¤åˆ¶ä¸Šé¢çš„ä»£ç ç‰‡æ®µåˆ°ä½ çš„æ–‡ä»¶æˆ–å‘½ä»¤è¡Œé‡Œ.

#### ğŸ’¡ è¯´æ˜:

ä¸€äº›éè¥¿æ–¹å­—ç¬¦è™½ç„¶çœ‹èµ·æ¥å’Œè‹±è¯­å­—æ¯ç›¸åŒ, ä½†ä¼šè¢«è§£é‡Šå™¨è¯†åˆ«ä¸ºä¸åŒçš„å­—æ¯.

\>>\> ord('Ğµ') \# è¥¿é‡Œå°”è¯­çš„ 'e' (Ye)
1077
\>>\> ord('e') \# æ‹‰ä¸è¯­çš„ 'e', ç”¨äºè‹±æ–‡å¹¶ä½¿ç”¨æ ‡å‡†é”®ç›˜è¾“å…¥
101
\>>\> 'Ğµ' \== 'e'
False

\>>\> value \= 42 \# æ‹‰ä¸è¯­ e
\>>\> valuĞµ \= 23 \# è¥¿é‡Œå°”è¯­ 'e', Python 2.x çš„è§£é‡Šå™¨åœ¨è¿™ä¼šæŠ›å‡º \`SyntaxError\` å¼‚å¸¸
\>>\> value
42

å†…ç½®çš„ `ord()` å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªå­—ç¬¦çš„ Unicode [ä»£ç ç‚¹](https://en.wikipedia.org/wiki/Code_point), è¿™é‡Œè¥¿é‡Œå°”è¯­ 'e' å’Œæ‹‰ä¸è¯­ 'e' çš„ä»£ç ç‚¹ä¸åŒè¯å®äº†ä¸Šè¿°ä¾‹å­.

---

### \> Teleportation/ç©ºé—´ç§»åŠ¨ \*

import numpy as np

def energy_send(x):
\# åˆå§‹åŒ–ä¸€ä¸ª numpy æ•°ç»„
np.array(\[float(x)\])

def energy_receive():
\# è¿”å›ä¸€ä¸ªç©ºçš„ numpy æ•°ç»„
return np.empty((), dtype\=np.float).tolist()

**Output:**

\>>\> energy_send(123.456)
\>>\> energy_receive()
123.456

è°æ¥ç»™æˆ‘å‘ä¸ªè¯ºè´å°”å¥–?

#### ğŸ’¡ è¯´æ˜:

- æ³¨æ„åœ¨ `energy_send` å‡½æ•°ä¸­åˆ›å»ºçš„ numpy æ•°ç»„å¹¶æ²¡æœ‰è¿”å›, å› æ­¤å†…å­˜ç©ºé—´è¢«é‡Šæ”¾å¹¶å¯ä»¥è¢«é‡æ–°åˆ†é….
- `numpy.empty()` ç›´æ¥è¿”å›ä¸‹ä¸€æ®µç©ºé—²å†…å­˜ï¼Œè€Œä¸é‡æ–°åˆå§‹åŒ–. è€Œè¿™ä¸ªå†…å­˜ç‚¹æ°å¥½å°±æ˜¯åˆšåˆšé‡Šæ”¾çš„é‚£ä¸ª(é€šå¸¸æƒ…å†µä¸‹, å¹¶ä¸ç»å¯¹).

---

### \> Well, something is fishy.../å—¯ï¼Œæœ‰äº›å¯ç–‘...

def square(x):
"""
ä¸€ä¸ªé€šè¿‡åŠ æ³•è®¡ç®—å¹³æ–¹çš„ç®€å•å‡½æ•°.
"""
sum_so_far \= 0
for counter in range(x):
sum_so_far \= sum_so_far + x
return sum_so_far

**Output (Python 2.x):**

éš¾é“ä¸åº”è¯¥æ˜¯ 100 å—?

**æ³¨æ„:** å¦‚æœä½ æ— æ³•é‡ç°, å¯ä»¥å°è¯•è¿è¡Œè¿™ä¸ªæ–‡ä»¶[mixed_tabs_and_spaces.py](https://github.com/leisurelicht/wtfpython-cn/blob/master/mixed_tabs_and_spaces.py).

#### ğŸ’¡ è¯´æ˜:

- **ä¸è¦æ··ç”¨åˆ¶è¡¨ç¬¦(tab)å’Œç©ºæ ¼(space)!** åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, return çš„å‰é¢æ˜¯"1 ä¸ªåˆ¶è¡¨ç¬¦", è€Œå…¶ä»–éƒ¨åˆ†çš„ä»£ç å‰é¢æ˜¯ "4 ä¸ªç©ºæ ¼".
- Python æ˜¯è¿™ä¹ˆå¤„ç†åˆ¶è¡¨ç¬¦çš„:

  > é¦–å…ˆ, åˆ¶è¡¨ç¬¦ä¼šä»å·¦åˆ°å³ä¾æ¬¡è¢«æ›¿æ¢æˆ 8 ä¸ªç©ºæ ¼, ç›´åˆ°è¢«æ›¿æ¢åçš„å­—ç¬¦æ€»æ•°æ˜¯å…«çš„å€æ•° <...>

- å› æ­¤, `square` å‡½æ•°æœ€åä¸€è¡Œçš„åˆ¶è¡¨ç¬¦ä¼šè¢«æ›¿æ¢æˆ 8 ä¸ªç©ºæ ¼, å¯¼è‡´ return è¯­å¥è¿›å…¥å¾ªç¯è¯­å¥é‡Œé¢.
- Python 3 å¾ˆå‹å¥½, åœ¨è¿™ç§æƒ…å†µä¸‹ä¼šè‡ªåŠ¨æŠ›å‡ºé”™è¯¯.

  **Output (Python 3.x):**

  TabError: inconsistent use of tabs and spaces in indentation

---

---

## Section: Watch out for the landmines!/å°å¿ƒåœ°é›·!

### \> Modifying a dictionary while iterating over it/è¿­ä»£å­—å…¸æ—¶çš„ä¿®æ”¹

x \= {0: None}

for i in x:
del x\[i\]
x\[i+1\] \= None
print(i)

**Output (Python 2.7- Python 3.5):**

æ˜¯çš„, å®ƒè¿è¡Œäº†**å…«æ¬¡**ç„¶åæ‰åœä¸‹æ¥.

#### ğŸ’¡ è¯´æ˜:

- Python ä¸æ”¯æŒå¯¹å­—å…¸è¿›è¡Œè¿­ä»£çš„åŒæ—¶ä¿®æ”¹å®ƒ.
- å®ƒä¹‹æ‰€ä»¥è¿è¡Œ 8 æ¬¡, æ˜¯å› ä¸ºå­—å…¸ä¼šè‡ªåŠ¨æ‰©å®¹ä»¥å®¹çº³æ›´å¤šé”®å€¼(æˆ‘ä»¬æœ‰ 8 æ¬¡åˆ é™¤è®°å½•, å› æ­¤éœ€è¦æ‰©å®¹). è¿™å®é™…ä¸Šæ˜¯ä¸€ä¸ªå®ç°ç»†èŠ‚. (è¯‘: åº”è¯¥æ˜¯å› ä¸ºå­—å…¸çš„åˆå§‹æœ€å°å€¼æ˜¯ 8, æ‰©å®¹ä¼šå¯¼è‡´æ•£åˆ—è¡¨åœ°å€å‘ç”Ÿå˜åŒ–è€Œä¸­æ–­å¾ªç¯.)
- åœ¨ä¸åŒçš„ Python å®ç°ä¸­åˆ é™¤é”®çš„å¤„ç†æ–¹å¼ä»¥åŠè°ƒæ•´å¤§å°çš„æ—¶é—´å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒ.(è¯‘: å°±æ˜¯è¯´ä»€ä¹ˆæ—¶å€™æ‰©å®¹åœ¨ä¸åŒç‰ˆæœ¬ä¸­å¯èƒ½æ˜¯ä¸åŒçš„, åœ¨ 3.6 åŠ 3.7 çš„ç‰ˆæœ¬ä¸­åˆ°[5](https://github.com/python/cpython/blob/v3.6.1/Objects/dictobject.c#L103-L110)å°±ä¼šè‡ªåŠ¨æ‰©å®¹äº†. ä»¥åä¹Ÿæœ‰å¯èƒ½å†æ¬¡å‘ç”Ÿå˜åŒ–. è¿™æ˜¯ä¸ºäº†é¿å…æ•£åˆ—å†²çª. é¡ºå¸¦ä¸€æ, åé¢ä¸¤æ¬¡æ‰©å®¹ä¼šæ‰©å±•ä¸º 32 å’Œ 256. å³`8->32->256`.)
- æ›´å¤šçš„ä¿¡æ¯, ä½ å¯ä»¥å‚è€ƒè¿™ä¸ª StackOverflow çš„[å›ç­”](https://stackoverflow.com/questions/44763802/bug-in-python-dict), å®ƒè¯¦ç»†çš„è§£é‡Šä¸€ä¸ªç±»ä¼¼çš„ä¾‹å­.

---

### \> Stubborn `del` operator/åšå¼ºçš„ `del` \*

class SomeClass:
def \_\_del\_\_(self):
print("Deleted!")

**Output:** 1.

\>>\> x \= SomeClass()
\>>\> y \= x
\>>\> del x \# è¿™é‡Œåº”è¯¥ä¼šè¾“å‡º "Deleted!"
\>>\> del y
Deleted!

å”·, ç»ˆäºåˆ é™¤äº†. ä½ å¯èƒ½å·²ç»çŒœåˆ°äº†åœ¨æˆ‘ä»¬ç¬¬ä¸€æ¬¡å°è¯•åˆ é™¤ `x` æ—¶æ˜¯ä»€ä¹ˆè®© `__del__` å…äºè¢«è°ƒç”¨çš„. é‚£è®©æˆ‘ä»¬ç»™è¿™ä¸ªä¾‹å­å¢åŠ ç‚¹éš¾åº¦.

2.

\>>\> x \= SomeClass()
\>>\> y \= x
\>>\> del x
\>>\> y \# æ£€æŸ¥ä¸€ä¸‹ y æ˜¯å¦å­˜åœ¨
<\_\_main\_\_.SomeClass instance at 0x7f98a1a67fc8\>
\>>\> del y \# åƒä¹‹å‰ä¸€æ ·, è¿™é‡Œåº”è¯¥ä¼šè¾“å‡º "Deleted!"
\>>\> globals() \# å¥½å§, å¹¶æ²¡æœ‰. è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æ‰€æœ‰çš„å…¨å±€å˜é‡
Deleted!
{'\_\_builtins\_\_': <module '\_\_builtin\_\_' (built\-in)\>, 'SomeClass': <class \_\_main\_\_.SomeClass at 0x7f98a1a5f668\>, '\_\_package\_\_': None, '\_\_name\_\_': '\_\_main\_\_', '\_\_doc\_\_': None}

å¥½äº†ï¼Œç°åœ¨å®ƒè¢«åˆ é™¤äº† ğŸ˜•

#### ğŸ’¡ è¯´æ˜:

- `del x` å¹¶ä¸ä¼šç«‹åˆ»è°ƒç”¨ `x.__del__()`.
- æ¯å½“é‡åˆ° `del x`, Python ä¼šå°† `x` çš„å¼•ç”¨æ•°å‡ 1, å½“ `x` çš„å¼•ç”¨æ•°å‡åˆ° 0 æ—¶å°±ä¼šè°ƒç”¨ `x.__del__()`.
- åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­, `y.__del__()` ä¹‹æ‰€ä»¥æœªè¢«è°ƒç”¨, æ˜¯å› ä¸ºå‰ä¸€æ¡è¯­å¥ (`>>> y`) å¯¹åŒä¸€å¯¹è±¡åˆ›å»ºäº†å¦ä¸€ä¸ªå¼•ç”¨, ä»è€Œé˜²æ­¢åœ¨æ‰§è¡Œ `del y` åå¯¹è±¡çš„å¼•ç”¨æ•°å˜ä¸º 0.
- è°ƒç”¨ `globals` å¯¼è‡´å¼•ç”¨è¢«é”€æ¯, å› æ­¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ° "Deleted!" ç»ˆäºè¢«è¾“å‡ºäº†.
- (è¯‘: è¿™å…¶å®æ˜¯ Python äº¤äº’è§£é‡Šå™¨çš„ç‰¹æ€§, å®ƒä¼šè‡ªåŠ¨è®© `_` ä¿å­˜ä¸Šä¸€ä¸ªè¡¨è¾¾å¼è¾“å‡ºçš„å€¼, è¯¦ç»†å¯ä»¥çœ‹[è¿™é‡Œ](https://www.cnblogs.com/leisurelylicht/p/diao-pi-de-kong-zhi-tai.html).)

---

### \> Deleting a list item while iterating/è¿­ä»£åˆ—è¡¨æ—¶åˆ é™¤å…ƒç´ 

list_1 \= \[1, 2, 3, 4\]
list_2 \= \[1, 2, 3, 4\]
list_3 \= \[1, 2, 3, 4\]
list_4 \= \[1, 2, 3, 4\]

for idx, item in enumerate(list_1):
del item

for idx, item in enumerate(list_2):
list_2.remove(item)

for idx, item in enumerate(list_3\[:\]):
list_3.remove(item)

for idx, item in enumerate(list_4):
list_4.pop(idx)

**Output:**

\>>\> list_1
\[1, 2, 3, 4\]
\>>\> list_2
\[2, 4\]
\>>\> list_3
\[\]
\>>\> list_4
\[2, 4\]

ä½ èƒ½çŒœåˆ°ä¸ºä»€ä¹ˆè¾“å‡ºæ˜¯ `[2, 4]` å—?

#### ğŸ’¡ è¯´æ˜:

- åœ¨è¿­ä»£æ—¶ä¿®æ”¹å¯¹è±¡æ˜¯ä¸€ä¸ªå¾ˆæ„šè ¢çš„ä¸»æ„. æ­£ç¡®çš„åšæ³•æ˜¯è¿­ä»£å¯¹è±¡çš„å‰¯æœ¬, `list_3[:]` å°±æ˜¯è¿™ä¹ˆåšçš„.

  \>>\> some_list \= \[1, 2, 3, 4\]
  \>>\> id(some_list)
  139798789457608
  \>>\> id(some_list\[:\]) \# æ³¨æ„ python ä¸ºåˆ‡ç‰‡åˆ—è¡¨åˆ›å»ºäº†æ–°å¯¹è±¡.
  139798779601192

**`del`, `remove` å’Œ `pop` çš„ä¸åŒ:**

- `del var_name` åªæ˜¯ä»æœ¬åœ°æˆ–å…¨å±€å‘½åç©ºé—´ä¸­åˆ é™¤äº† `var_name` (è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ `list_1` æ²¡æœ‰å—åˆ°å½±å“).
- `remove` ä¼šåˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„æŒ‡å®šå€¼, è€Œä¸æ˜¯ç‰¹å®šçš„ç´¢å¼•, å¦‚æœæ‰¾ä¸åˆ°å€¼åˆ™æŠ›å‡º `ValueError` å¼‚å¸¸.
- `pop` åˆ™ä¼šåˆ é™¤æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ å¹¶è¿”å›å®ƒ, å¦‚æœæŒ‡å®šäº†æ— æ•ˆçš„ç´¢å¼•åˆ™æŠ›å‡º `IndexError` å¼‚å¸¸.

**ä¸ºä»€ä¹ˆè¾“å‡ºæ˜¯ `[2, 4]`?**

- åˆ—è¡¨è¿­ä»£æ˜¯æŒ‰ç´¢å¼•è¿›è¡Œçš„, æ‰€ä»¥å½“æˆ‘ä»¬ä» `list_2` æˆ– `list_4` ä¸­åˆ é™¤ `1` æ—¶, åˆ—è¡¨çš„å†…å®¹å°±å˜æˆäº† `[2, 3, 4]`. å‰©ä½™å…ƒç´ ä¼šä¾æ¬¡ä½ç§», ä¹Ÿå°±æ˜¯è¯´, `2` çš„ç´¢å¼•ä¼šå˜ä¸º 0, `3` ä¼šå˜ä¸º 1. ç”±äºä¸‹ä¸€æ¬¡è¿­ä»£å°†è·å–ç´¢å¼•ä¸º 1 çš„å…ƒç´  (å³ `3`), å› æ­¤ `2` å°†è¢«å½»åº•çš„è·³è¿‡. ç±»ä¼¼çš„æƒ…å†µä¼šäº¤æ›¿å‘ç”Ÿåœ¨åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ ä¸Š.

- å‚è€ƒè¿™ä¸ª StackOverflow çš„[å›ç­”](https://stackoverflow.com/questions/45946228/what-happens-when-you-try-to-delete-a-list-element-while-iterating-over-it)æ¥è§£é‡Šè¿™ä¸ªä¾‹å­
- å…³äº Python ä¸­å­—å…¸çš„ç±»ä¼¼ä¾‹å­, å¯ä»¥å‚è€ƒè¿™ä¸ª Stackoverflow çš„[å›ç­”](https://stackoverflow.com/questions/45877614/how-to-change-all-the-dictionary-keys-in-a-for-loop-with-d-items).

---

### \> Loop variables leaking out!/å¾ªç¯å˜é‡æ³„æ¼!

1.

for x in range(7):
if x \== 6:
print(x, ': for x inside loop')
print(x, ': x in global')

**Output:**

6 : for x inside loop
6 : x in global

ä½†æ˜¯ `x` ä»æœªåœ¨å¾ªç¯å¤–è¢«å®šä¹‰...

2.

\# è¿™æ¬¡æˆ‘ä»¬å…ˆåˆå§‹åŒ– x
x \= \-1
for x in range(7):
if x \== 6:
print(x, ': for x inside loop')
print(x, ': x in global')

**Output:**

6 : for x inside loop
6 : x in global

3.

```
x = 1
print([x for x in range(5)])
print(x, ': x in global')
```

**Output (on Python 2.x):**

```
[0, 1, 2, 3, 4]
(4, ': x in global')
```

**Output (on Python 3.x):**

```
[0, 1, 2, 3, 4]
1 : x in global
```

#### ğŸ’¡ è¯´æ˜:

- åœ¨ Python ä¸­, for å¾ªç¯ä½¿ç”¨æ‰€åœ¨ä½œç”¨åŸŸå¹¶åœ¨ç»“æŸåä¿ç•™å®šä¹‰çš„å¾ªç¯å˜é‡. å¦‚æœæˆ‘ä»¬æ›¾åœ¨å…¨å±€å‘½åç©ºé—´ä¸­å®šä¹‰è¿‡å¾ªç¯å˜é‡. åœ¨è¿™ç§æƒ…å†µä¸‹, å®ƒä¼šé‡æ–°ç»‘å®šç°æœ‰å˜é‡.
- Python 2.x å’Œ Python 3.x è§£é‡Šå™¨åœ¨åˆ—è¡¨æ¨å¯¼å¼ç¤ºä¾‹ä¸­çš„è¾“å‡ºå·®å¼‚, åœ¨æ–‡æ¡£ [Whatâ€™s New In Python 3.0](https://docs.python.org/3/whatsnew/3.0.html) ä¸­å¯ä»¥æ‰¾åˆ°ç›¸å…³çš„è§£é‡Š:

  > "åˆ—è¡¨æ¨å¯¼ä¸å†æ”¯æŒå¥æ³•å½¢å¼ `[... for var in item1, item2, ...]`. å–è€Œä»£ä¹‹çš„æ˜¯ `[... for var in (item1, item2, ...)]`. å¦å¤–, æ³¨æ„åˆ—è¡¨æ¨å¯¼å…·æœ‰ä¸åŒçš„è¯­ä¹‰: å®ƒä»¬æ›´æ¥è¿‘äº `list()` æ„é€ å‡½æ•°ä¸­ç”Ÿæˆå™¨è¡¨è¾¾å¼çš„è¯­æ³•ç³–(è¯‘: è¿™ä¸€å¥æˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ˜ç™½), ç‰¹åˆ«æ˜¯å¾ªç¯æ§åˆ¶å˜é‡ä¸å†æ³„æ¼åˆ°å‘¨å›´çš„ä½œç”¨åŸŸä¸­."

---

### \> Beware of default mutable arguments!/å½“å¿ƒé»˜è®¤çš„å¯å˜å‚æ•°!

def some_func(default_arg\=\[\]):
default_arg.append("some_string")
return default_arg

**Output:**

\>>\> some_func()
\['some_string'\]
\>>\> some_func()
\['some_string', 'some_string'\]
\>>\> some_func(\[\])
\['some_string'\]
\>>\> some_func()
\['some_string', 'some_string', 'some_string'\]

#### ğŸ’¡ è¯´æ˜:

- Python ä¸­å‡½æ•°çš„é»˜è®¤å¯å˜å‚æ•°å¹¶ä¸æ˜¯æ¯æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶éƒ½ä¼šè¢«åˆå§‹åŒ–. ç›¸å, å®ƒä»¬ä¼šä½¿ç”¨æœ€è¿‘åˆ†é…çš„å€¼ä½œä¸ºé»˜è®¤å€¼. å½“æˆ‘ä»¬æ˜ç¡®çš„å°† `[]` ä½œä¸ºå‚æ•°ä¼ é€’ç»™ `some_func` çš„æ—¶å€™, å°±ä¸ä¼šä½¿ç”¨ `default_arg` çš„é»˜è®¤å€¼, æ‰€ä»¥å‡½æ•°ä¼šè¿”å›æˆ‘ä»¬æ‰€æœŸæœ›çš„ç»“æœ.

  def some_func(default_arg\=\[\]):
  default_arg.append("some_string")
  return default_arg

  **Output:**

  \>>\> some_func.\_\_defaults\_\_ \# è¿™é‡Œä¼šæ˜¾ç¤ºå‡½æ•°çš„é»˜è®¤å‚æ•°çš„å€¼
  (\[\],)
  \>>\> some_func()
  \>>\> some_func.\_\_defaults\_\_
  (\['some_string'\],)
  \>>\> some_func()
  \>>\> some_func.\_\_defaults\_\_
  (\['some_string', 'some_string'\],)
  \>>\> some_func(\[\])
  \>>\> some_func.\_\_defaults\_\_
  (\['some_string', 'some_string'\],)

- é¿å…å¯å˜å‚æ•°å¯¼è‡´çš„é”™è¯¯çš„å¸¸è§åšæ³•æ˜¯å°† `None` æŒ‡å®šä¸ºå‚æ•°çš„é»˜è®¤å€¼, ç„¶åæ£€æŸ¥æ˜¯å¦æœ‰å€¼ä¼ ç»™å¯¹åº”çš„å‚æ•°. ä¾‹:

  def some_func(default_arg\=None):
  if not default_arg:
  default_arg \= \[\]
  default_arg.append("some_string")
  return default_arg

---

### \> Catching the Exceptions/æ•è·å¼‚å¸¸

some_list \= \[1, 2, 3\]
try:
\# è¿™é‡Œä¼šæŠ›å‡ºå¼‚å¸¸ \`\`IndexError\`\`
print(some_list\[4\])
except IndexError, ValueError:
print("Caught!")

try:
\# è¿™é‡Œä¼šæŠ›å‡ºå¼‚å¸¸ \`\`ValueError\`\`
some_list.remove(4)
except IndexError, ValueError:
print("Caught again!")

**Output (Python 2.x):**

Caught!

ValueError: list.remove(x): x not in list

**Output (Python 3.x):**

File "<input>", line 3
except IndexError, ValueError:
^
SyntaxError: invalid syntax

#### ğŸ’¡ è¯´æ˜:

- å¦‚æœä½ æƒ³è¦åŒæ—¶æ•è·å¤šä¸ªä¸åŒç±»å‹çš„å¼‚å¸¸æ—¶, ä½ éœ€è¦å°†å®ƒä»¬ç”¨æ‹¬å·åŒ…æˆä¸€ä¸ªå…ƒç»„ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’. ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰åç§°, å¦‚æœä½ æä¾›, å®ƒå°†ä¸è¢«æ•è·çš„å¼‚å¸¸å®ä¾‹ç»‘å®š. ä¾‹,

  some_list \= \[1, 2, 3\]
  try:
  \# è¿™é‡Œä¼šæŠ›å‡ºå¼‚å¸¸ \`\`ValueError\`\`
  some_list.remove(4)
  except (IndexError, ValueError), e:
  print("Caught again!")
  print(e)

  **Output (Python 2.x):**

  ```
  Caught again!
  list.remove(x): x not in list
  ```

  **Output (Python 3.x):**

  File "<input>", line 4
  except (IndexError, ValueError), e:
  ^
  IndentationError: unindent does not match any outer indentation level

- åœ¨ Python 3 ä¸­, ç”¨é€—å·åŒºåˆ†å¼‚å¸¸ä¸å¯é€‰åç§°æ˜¯æ— æ•ˆçš„; æ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨ `as` å…³é”®å­—. ä¾‹,

  some_list \= \[1, 2, 3\]
  try:
  some_list.remove(4)

  except (IndexError, ValueError) as e:
  print("Caught again!")
  print(e)

  **Output:**

  ```
  Caught again!
  list.remove(x): x not in list
  ```

---

### \> Same operands, different story!/åŒäººä¸åŒå‘½!

1.

a \= \[1, 2, 3, 4\]
b \= a
a \= a + \[5, 6, 7, 8\]

**Output:**

\>>\> a
\[1, 2, 3, 4, 5, 6, 7, 8\]
\>>\> b
\[1, 2, 3, 4\]

2.

a \= \[1, 2, 3, 4\]
b \= a
a += \[5, 6, 7, 8\]

**Output:**

\>>\> a
\[1, 2, 3, 4, 5, 6, 7, 8\]
\>>\> b
\[1, 2, 3, 4, 5, 6, 7, 8\]

#### ğŸ’¡ è¯´æ˜:

- `a += b` å¹¶ä¸æ€»æ˜¯ä¸ `a = a + b` è¡¨ç°ç›¸åŒ. ç±»å®ç° _`op=`_ è¿ç®—ç¬¦çš„æ–¹å¼ _ä¹Ÿè®¸_ æ˜¯ä¸åŒçš„, åˆ—è¡¨å°±æ˜¯è¿™æ ·åšçš„.
- è¡¨è¾¾å¼ `a = a + [5,6,7,8]` ä¼šç”Ÿæˆä¸€ä¸ªæ–°åˆ—è¡¨, å¹¶è®© `a` å¼•ç”¨è¿™ä¸ªæ–°åˆ—è¡¨, åŒæ—¶ä¿æŒ `b` ä¸å˜.
- è¡¨è¾¾å¼ `a += [5,6,7,8]` å®é™…ä¸Šæ˜¯ä½¿ç”¨çš„æ˜¯ "extend" å‡½æ•°, æ‰€ä»¥ `a` å’Œ `b` ä»ç„¶æŒ‡å‘å·²è¢«ä¿®æ”¹çš„åŒä¸€åˆ—è¡¨.

---

### \> The out of scope variable/å¤–éƒ¨ä½œç”¨åŸŸå˜é‡

a \= 1
def some_func():
return a

def another_func():
a += 1
return a

**Output:**

\>>\> some_func()
1
\>>\> another_func()
UnboundLocalError: local variable 'a' referenced before assignment

#### ğŸ’¡ è¯´æ˜:

- å½“ä½ åœ¨ä½œç”¨åŸŸä¸­å¯¹å˜é‡è¿›è¡Œèµ‹å€¼æ—¶, å˜é‡ä¼šå˜æˆè¯¥ä½œç”¨åŸŸå†…çš„å±€éƒ¨å˜é‡. å› æ­¤ `a` ä¼šå˜æˆ `another_func` å‡½æ•°ä½œç”¨åŸŸä¸­çš„å±€éƒ¨å˜é‡, ä½†å®ƒåœ¨å‡½æ•°ä½œç”¨åŸŸä¸­å¹¶æ²¡æœ‰è¢«åˆå§‹åŒ–, æ‰€ä»¥ä¼šå¼•å‘é”™è¯¯.
- å¯ä»¥é˜…è¯»[è¿™ä¸ª](http://sebastianraschka.com/Articles/2014_python_scope_and_namespaces.html)ç®€çŸ­å´å¾ˆæ£’çš„æŒ‡å—, äº†è§£æ›´å¤šå…³äº Python ä¸­å‘½åç©ºé—´å’Œä½œç”¨åŸŸçš„å·¥ä½œåŸç†.
- æƒ³è¦åœ¨ `another_func` ä¸­ä¿®æ”¹å¤–éƒ¨ä½œç”¨åŸŸå˜é‡ `a` çš„è¯, å¯ä»¥ä½¿ç”¨ `global` å…³é”®å­—.

  def another_func()
  global a
  a += 1
  return a

  **Output:**

---

### \> Be careful with chained operations/å°å¿ƒé“¾å¼æ“ä½œ

\>>\> (False \== False) in \[False\] \# å¯ä»¥ç†è§£
False
\>>\> False \== (False in \[False\]) \# å¯ä»¥ç†è§£
False
\>>\> False \== False in \[False\] \# ä¸ºæ¯›?
True

\>>\> True is False \== False
False
\>>\> False is False is False
True

\>>\> 1 \> 0 < 1
True
\>>\> (1 \> 0) < 1
False
\>>\> 1 \> (0 < 1)
False

#### ğŸ’¡ è¯´æ˜:

æ ¹æ® [https://docs.python.org/2/reference/expressions.html#not-in](https://docs.python.org/2/reference/expressions.html#not-in)

> å½¢å¼ä¸Š, å¦‚æœ a, b, c, ..., y, z æ˜¯è¡¨è¾¾å¼, è€Œ op1, op2, ..., opN æ˜¯æ¯”è¾ƒè¿ç®—ç¬¦, é‚£ä¹ˆé™¤äº†æ¯ä¸ªè¡¨è¾¾å¼æœ€å¤šåªå‡ºç°ä¸€æ¬¡ä»¥å¤– a op1 b op2 c ... y opN z å°±ç­‰äº a op1 b and b op2 c and ... y opN z.

è™½ç„¶ä¸Šé¢çš„ä¾‹å­ä¼¼ä¹å¾ˆæ„šè ¢, ä½†æ˜¯åƒ `a == b == c` æˆ– `0 <= x <= 100` å°±å¾ˆæ£’äº†.

- `False is False is False` ç›¸å½“äº `(False is False) and (False is False)`
- `True is False == False` ç›¸å½“äº `True is False and False == False`, ç”±äºè¯­å¥çš„ç¬¬ä¸€éƒ¨åˆ† (`True is False`) ç­‰äº `False`, å› æ­¤æ•´ä¸ªè¡¨è¾¾å¼çš„ç»“æœä¸º `False`.
- `1 > 0 < 1` ç›¸å½“äº `1 > 0 and 0 < 1`, æ‰€ä»¥æœ€ç»ˆç»“æœä¸º `True`.
- è¡¨è¾¾å¼ `(1 > 0) < 1` ç›¸å½“äº `True < 1` ä¸”

  \>>\> int(True)
  1
  \>>\> True + 1 \# ä¸è¿™ä¸ªä¾‹å­æ— å…³ï¼Œåªæ˜¯å¥½ç©
  2

  æ‰€ä»¥, `1 < 1` ç­‰äº `False`

---

### \> Name resolution ignoring class scope/å¿½ç•¥ç±»ä½œç”¨åŸŸçš„åç§°è§£æ

1.

x \= 5
class SomeClass:
x \= 17
y \= (x for i in range(10))

**Output:**

\>>\> list(SomeClass.y)\[0\]
5

2.

x \= 5
class SomeClass:
x \= 17
y \= \[x for i in range(10)\]

**Output (Python 2.x):**

**Output (Python 3.x):**

#### ğŸ’¡ è¯´æ˜:

- ç±»å®šä¹‰ä¸­åµŒå¥—çš„ä½œç”¨åŸŸä¼šå¿½ç•¥ç±»å†…çš„åç§°ç»‘å®š.
- ç”Ÿæˆå™¨è¡¨è¾¾å¼æœ‰å®ƒè‡ªå·±çš„ä½œç”¨åŸŸ.
- ä» Python 3.X å¼€å§‹, åˆ—è¡¨æ¨å¯¼å¼ä¹Ÿæœ‰è‡ªå·±çš„ä½œç”¨åŸŸ.

---

### \> Needle in a Haystack/å¤§æµ·æé’ˆ

1.

x, y \= (0, 1) if True else None, None

**Output:**

```
>>> x, y  # æœŸæœ›çš„ç»“æœæ˜¯ (0, 1)
((0, 1), None)
```

å‡ ä¹æ¯ä¸ª Python ç¨‹åºå‘˜éƒ½é‡åˆ°è¿‡ç±»ä¼¼çš„æƒ…å†µ.

2.

t \= ('one', 'two')
for i in t:
print(i)

t \= ('one')
for i in t:
print(i)

t \= ()
print(t)

**Output:**

#### ğŸ’¡ è¯´æ˜:

- å¯¹äº 1, æ­£ç¡®çš„è¯­å¥æ˜¯ `x, y = (0, 1) if True else (None, None)`.
- å¯¹äº 2, æ­£ç¡®çš„è¯­å¥æ˜¯ `t = ('one',)` æˆ–è€… `t = 'one',` (ç¼ºå°‘é€—å·) å¦åˆ™è§£é‡Šå™¨ä¼šè®¤ä¸º `t` æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸², å¹¶é€ä¸ªå­—ç¬¦å¯¹å…¶è¿›è¡Œè¿­ä»£.
- `()` æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ ‡è®°ï¼Œè¡¨ç¤ºç©ºå…ƒç»„.

---

---

## Section: The Hidden treasures!/éšè—çš„å®è—!

This section contains few of the lesser-known interesting things about Python that most beginners like me are unaware of (well, not anymore).

### \> Okay Python, Can you make me fly?/Python, å¯å¦å¸¦æˆ‘é£? \*

å¥½, å»å§.

**Output:** å˜˜.. è¿™æ˜¯ä¸ªè¶…çº§ç§˜å¯†.

#### ğŸ’¡ è¯´æ˜:

- `antigravity` æ¨¡å—æ˜¯ Python å¼€å‘äººå‘˜å‘å¸ƒçš„å°‘æ•°å¤æ´»èŠ‚å½©è›‹ä¹‹ä¸€.
- `import antigravity` ä¼šæ‰“å¼€ä¸€ä¸ª Python çš„[ç»å…¸ XKCD æ¼«ç”»](http://xkcd.com/353/)é¡µé¢.
- ä¸æ­¢å¦‚æ­¤. è¿™ä¸ª**å¤æ´»èŠ‚å½©è›‹é‡Œè¿˜æœ‰ä¸€ä¸ªå¤æ´»èŠ‚å½©è›‹**. å¦‚æœä½ çœ‹ä¸€ä¸‹[ä»£ç ](https://github.com/python/cpython/blob/master/Lib/antigravity.py#L7-L17), å°±ä¼šå‘ç°è¿˜æœ‰ä¸€ä¸ªå‡½æ•°å®ç°äº† [XKCD's geohashing ç®—æ³•](https://xkcd.com/426/).

---

### \> `goto`, but why?/`goto`, ä½†ä¸ºä»€ä¹ˆ? \*

from goto import goto, label
for i in range(9):
for j in range(9):
for k in range(9):
print("I'm trapped, please rescue!")
if k \== 2:
goto .breakout \# ä»å¤šé‡å¾ªç¯ä¸­è·³å‡º
label .breakout
print("Freedom!")

**Output (Python 2.3):**

I'm trapped, please rescue!
I'm trapped, please rescue!
Freedom!

#### ğŸ’¡ è¯´æ˜:

- 2004 å¹´ 4 æœˆ 1 æ—¥, Python [å®£å¸ƒ](https://mail.python.org/pipermail/python-announce-list/2004-April/002982.html) åŠ å…¥ä¸€ä¸ªå¯ç”¨çš„ `goto` ä½œä¸ºæ„šäººèŠ‚ç¤¼ç‰©.
- å½“å‰ç‰ˆæœ¬çš„ Python å¹¶æ²¡æœ‰è¿™ä¸ªæ¨¡å—.
- å°±ç®—å¯ä»¥ç”¨, ä¹Ÿè¯·ä¸è¦ä½¿ç”¨å®ƒ. è¿™é‡Œæ˜¯ä¸ºä»€ä¹ˆ Python ä¸­æ²¡æœ‰ `goto` çš„[åŸå› ](https://docs.python.org/3/faq/design.html#why-is-there-no-goto).

---

### \> Brace yourself!/åšå¥½æ€æƒ³å‡†å¤‡ \*

å¦‚æœä½ ä¸å–œæ¬¢åœ¨ Python ä¸­ä½¿ç”¨ç©ºæ ¼æ¥è¡¨ç¤ºä½œç”¨åŸŸ, ä½ å¯ä»¥å¯¼å…¥ C é£æ ¼çš„ {},

from \_\_future\_\_ import braces

**Output:**

File "some_file.py", line 1
from \_\_future\_\_ import braces
SyntaxError: not a chance

æƒ³ç”¨å¤§æ‹¬å·? æ²¡é—¨! è§‰å¾—ä¸çˆ½, è¯·å»ç”¨ java.

#### ğŸ’¡ è¯´æ˜:

- é€šå¸¸ `__future__` ä¼šæä¾› Python æœªæ¥ç‰ˆæœ¬çš„åŠŸèƒ½. ç„¶è€Œï¼Œè¿™é‡Œçš„ â€œæœªæ¥â€ æ˜¯ä¸€ä¸ªè®½åˆº.
- è¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾ç¤¾åŒºå¯¹æ­¤ç±»é—®é¢˜æ€åº¦çš„å¤æ´»èŠ‚å½©è›‹.

---

### \> Let's meet Friendly Language Uncle For Life/è®©ç”Ÿæ´»æ›´å‹å¥½ \*

**Output (Python 3.x)**

\>>\> from \_\_future\_\_ import barry_as_FLUFL
\>>\> "Ruby" != "Python" \# è¿™é‡Œæ²¡ä»€ä¹ˆç–‘é—®
File "some_file.py", line 1
"Ruby" != "Python"
^
SyntaxError: invalid syntax

\>>\> "Ruby" <> "Python"
True

è¿™å°±å¯¹äº†.

#### ğŸ’¡ è¯´æ˜:

- ç›¸å…³çš„ [PEP-401](https://www.python.org/dev/peps/pep-0401/) å‘å¸ƒäº 2009 å¹´ 4 æœˆ 1 æ—¥ (æ‰€ä»¥ä½ ç°åœ¨çŸ¥é“è¿™æ„å‘³ç€ä»€ä¹ˆäº†å§).
- å¼•ç”¨ PEP-401

  > æ„è¯†åˆ° Python 3.0 é‡Œçš„ != è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªä¼šå¼•èµ·æ‰‹æŒ‡ç–¼ç—›çš„ææ€–é”™è¯¯, FLUFL å°† <> è¿ç®—ç¬¦æ¢å¤ä¸ºå”¯ä¸€å†™æ³•.

- Uncle Barry åœ¨ PEP ä¸­è¿˜åˆ†äº«äº†å…¶ä»–ä¸œè¥¿; ä½ å¯ä»¥åœ¨[è¿™é‡Œ](https://www.python.org/dev/peps/pep-0401/)è·å¾—ä»–ä»¬.
- (è¯‘: è™½ç„¶æ–‡æ¡£ä¸­æ²¡å†™ï¼Œä½†åº”è¯¥æ˜¯åªèƒ½åœ¨äº¤äº’è§£é‡Šå™¨ä¸­ä½¿ç”¨.)

---

### \> Even Python understands that love is complicated/è¿ Python ä¹ŸçŸ¥é“çˆ±æ˜¯éš¾è¨€çš„ \*

ç­‰ç­‰, **this** æ˜¯ä»€ä¹ˆ? `this` æ˜¯çˆ± â¤ï¸

**Output:**

```
The Zen of Python, by Tim Peters

Beautiful is better than ugly.
ä¼˜ç¾èƒœäºä¸‘é™‹ï¼ˆPython ä»¥ç¼–å†™ä¼˜ç¾çš„ä»£ç ä¸ºç›®æ ‡ï¼‰
Explicit is better than implicit.
æ˜äº†èƒœäºæ™¦æ¶©ï¼ˆä¼˜ç¾çš„ä»£ç åº”å½“æ˜¯æ˜äº†çš„ï¼Œå‘½åè§„èŒƒï¼Œé£æ ¼ç›¸ä¼¼ï¼‰
Simple is better than complex.
ç®€æ´èƒœäºå¤æ‚ï¼ˆä¼˜ç¾çš„ä»£ç åº”å½“æ˜¯ç®€æ´çš„ï¼Œä¸è¦æœ‰å¤æ‚çš„å†…éƒ¨å®ç°ï¼‰
Complex is better than complicated.
å¤æ‚èƒœäºå‡Œä¹±ï¼ˆå¦‚æœå¤æ‚ä¸å¯é¿å…ï¼Œé‚£ä»£ç é—´ä¹Ÿä¸èƒ½æœ‰éš¾æ‡‚çš„å…³ç³»ï¼Œè¦ä¿æŒæ¥å£ç®€æ´ï¼‰
Flat is better than nested.
æ‰å¹³èƒœäºåµŒå¥—ï¼ˆä¼˜ç¾çš„ä»£ç åº”å½“æ˜¯æ‰å¹³çš„ï¼Œä¸èƒ½æœ‰å¤ªå¤šçš„åµŒå¥—ï¼‰
Sparse is better than dense.
é—´éš”èƒœäºç´§å‡‘ï¼ˆä¼˜ç¾çš„ä»£ç æœ‰é€‚å½“çš„é—´éš”ï¼Œä¸è¦å¥¢æœ›ä¸€è¡Œä»£ç è§£å†³é—®é¢˜ï¼‰
Readability counts.
å¯è¯»æ€§å¾ˆé‡è¦ï¼ˆä¼˜ç¾çš„ä»£ç ä¸€å®šæ˜¯å¯è¯»çš„ï¼‰
Special cases aren't special enough to break the rules.
æ²¡æœ‰ç‰¹ä¾‹ç‰¹æ®Šåˆ°éœ€è¦è¿èƒŒè¿™äº›è§„åˆ™ï¼ˆè¿™äº›è§„åˆ™è‡³é«˜æ— ä¸Šï¼‰
Although practicality beats purity.
å°½ç®¡æˆ‘ä»¬æ›´å€¾å‘äºå®ç”¨æ€§
Errors should never pass silently.
ä¸è¦å®‰é™çš„åŒ…å®¹æ‰€æœ‰é”™è¯¯
Unless explicitly silenced.
é™¤éä½ ç¡®å®šéœ€è¦è¿™æ ·åšï¼ˆç²¾å‡†åœ°æ•è·å¼‚å¸¸ï¼Œä¸å†™ except:pass é£æ ¼çš„ä»£ç ï¼‰
In the face of ambiguity, refuse the temptation to guess.
æ‹’ç»è¯±æƒ‘ä½ å»çŒœæµ‹çš„æš§æ˜§äº‹ç‰©
There should be one-- and preferably only one --obvious way to do it.
è€Œæ˜¯å°½é‡æ‰¾ä¸€ç§ï¼Œæœ€å¥½æ˜¯å”¯ä¸€ä¸€ç§æ˜æ˜¾çš„è§£å†³æ–¹æ¡ˆï¼ˆå¦‚æœä¸ç¡®å®šï¼Œå°±ç”¨ç©·ä¸¾æ³•ï¼‰
Although that way may not be obvious at first unless you're Dutch.
è™½ç„¶è¿™å¹¶ä¸å®¹æ˜“ï¼Œå› ä¸ºä½ ä¸æ˜¯ Python ä¹‹çˆ¶ï¼ˆè¿™é‡Œçš„ Dutch æ˜¯æŒ‡ Guido ï¼‰
Now is better than never.
ç°åœ¨è¡ŒåŠ¨å¥½è¿‡æ°¸è¿œä¸è¡ŒåŠ¨
Although never is often better than *right* now.
å°½ç®¡ä¸è¡ŒåŠ¨è¦å¥½è¿‡é²è½è¡ŒåŠ¨
If the implementation is hard to explain, it's a bad idea.
å¦‚æœä½ æ— æ³•å‘äººæè¿°ä½ çš„æ–¹æ¡ˆï¼Œé‚£è‚¯å®šä¸æ˜¯ä¸€ä¸ªå¥½æ–¹æ¡ˆï¼›
If the implementation is easy to explain, it may be a good idea.
å¦‚æœä½ èƒ½è½»æ¾å‘äººæè¿°ä½ çš„æ–¹æ¡ˆï¼Œé‚£ä¹Ÿè®¸ä¼šæ˜¯ä¸€ä¸ªå¥½æ–¹æ¡ˆï¼ˆæ–¹æ¡ˆæµ‹è¯„æ ‡å‡†ï¼‰
Namespaces are one honking great idea -- let's do more of those!
å‘½åç©ºé—´æ˜¯ä¸€ç§ç»å¦™çš„ç†å¿µï¼Œæˆ‘ä»¬åº”å½“å¤šåŠ åˆ©ç”¨ï¼ˆå€¡å¯¼ä¸å·å¬ï¼‰
```

è¿™æ˜¯ Python ä¹‹ç¦…!

\>>\> love \= this
\>>\> this is love
True
\>>\> love is True
False
\>>\> love is False
False
\>>\> love is not True or False
True
\>>\> love is not True or False; love is love \# çˆ±æ˜¯éš¾è¨€çš„
True

#### ğŸ’¡ è¯´æ˜:

- `this` æ¨¡å—æ˜¯å…³äº Python ä¹‹ç¦…çš„å¤æ´»èŠ‚å½©è›‹ ([PEP 20](https://www.python.org/dev/peps/pep-0020)).
- å¦‚æœä½ è®¤ä¸ºè¿™å·²ç»å¤Ÿæœ‰è¶£çš„äº†, å¯ä»¥çœ‹çœ‹ [this.py](https://hg.python.org/cpython/file/c3896275c0f6/Lib/this.py) çš„å®ç°. æœ‰è¶£çš„æ˜¯, Python ä¹‹ç¦…çš„å®ç°ä»£ç è¿åäº†ä»–è‡ªå·± (è¿™å¯èƒ½æ˜¯å”¯ä¸€ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µçš„åœ°æ–¹).

è‡³äº `love is not True or False; love is love`, æ„å¤–å´åˆä¸è¨€è€Œå–».

---

### \> Yes, it exists!/æ˜¯çš„, å®ƒå­˜åœ¨!

**å¾ªç¯çš„ `else`.** ä¸€ä¸ªå…¸å‹çš„ä¾‹å­:

def does_exists_num(l, to_find):
for num in l:
if num \== to_find:
print("Exists!")
break
else:
print("Does not exist")

**Output:**

\>>\> some_list \= \[1, 2, 3, 4, 5\]
\>>\> does_exists_num(some_list, 4)
Exists!
\>>\> does_exists_num(some_list, \-1)
Does not exist

**å¼‚å¸¸çš„ `else` .** ä¾‹,

try:
pass
except:
print("Exception occurred!!!")
else:
print("Try block executed successfully...")

**Output:**

Try block executed successfully...

#### ğŸ’¡ è¯´æ˜:

- å¾ªç¯åçš„ `else` å­å¥åªä¼šåœ¨å¾ªç¯æ²¡æœ‰è§¦å‘ `break` è¯­å¥, æ­£å¸¸ç»“æŸçš„æƒ…å†µä¸‹æ‰ä¼šæ‰§è¡Œ.
- try ä¹‹åçš„ `else` å­å¥ä¹Ÿè¢«ç§°ä¸º "å®Œæˆå­å¥", å› ä¸ºåœ¨ `try` è¯­å¥ä¸­åˆ°è¾¾ `else` å­å¥æ„å‘³ç€ try å—å®é™…ä¸Šå·²æˆåŠŸå®Œæˆ.

---

### \> Inpinity/æ— é™ \*

è‹±æ–‡æ‹¼å†™æ˜¯æœ‰æ„çš„, è¯·ä¸è¦ä¸ºæ­¤æäº¤è¡¥ä¸. (è¯‘: è¿™é‡Œæ˜¯ä¸ºäº†çªå‡º Python ä¸­æ— é™çš„å®šä¹‰ä¸[Pi](https://en.wikipedia.org/wiki/Pi)æœ‰å…³, æ‰€ä»¥å°†ä¸¤ä¸ªå•è¯æ‹¼æ¥äº†.)

**Output (Python 3.x):**

\>>\> infinity \= float('infinity')
\>>\> hash(infinity)
314159
\>>\> hash(float('-inf'))
\-314159

#### ğŸ’¡ è¯´æ˜:

- infinity çš„å“ˆå¸Œå€¼æ˜¯ 10âµ x Ï€.
- æœ‰æ„æ€çš„æ˜¯, `float('-inf')` çš„å“ˆå¸Œå€¼åœ¨ Python 3 ä¸­æ˜¯ "-10âµ x Ï€" , è€Œåœ¨ Python 2 ä¸­æ˜¯ "-10âµ x e".

---

### \> Mangling time!/ä¿®é¥°æ—¶é—´! \*

class Yo(object):
def \_\_init\_\_(self):
self.\_\_honey \= True
self.bitch \= True

**Output:**

\>>\> Yo().bitch
True
\>>\> Yo().\_\_honey
AttributeError: 'Yo' object has no attribute '\_\_honey'
\>>\> Yo().\_Yo\_\_honey
True

ä¸ºä»€ä¹ˆ `Yo()._Yo__honey` èƒ½è¿è¡Œ? åªæœ‰å°åº¦äººç†è§£.(è¯‘: è¿™ä¸ªæ¢—å¯èƒ½æ˜¯æŒ‡å°åº¦éŸ³ä¹äºº[Yo Yo Honey Singh](https://en.wikipedia.org/wiki/Yo_Yo_Honey_Singh))

#### ğŸ’¡ è¯´æ˜:

- [åå­—ä¿®é¥°](https://en.wikipedia.org/wiki/Name_mangling) ç”¨äºé¿å…ä¸åŒå‘½åç©ºé—´ä¹‹é—´åç§°å†²çª.
- åœ¨ Python ä¸­, è§£é‡Šå™¨ä¼šé€šè¿‡ç»™ç±»ä¸­ä»¥ `__` (åŒä¸‹åˆ’çº¿)å¼€å¤´ä¸”ç»“å°¾æœ€å¤šåªæœ‰ä¸€ä¸ªä¸‹åˆ’çº¿çš„ç±»æˆå‘˜åç§°åŠ ä¸Š`_NameOfTheClass` æ¥ä¿®é¥°(mangles)åç§°.
- æ‰€ä»¥, è¦è®¿é—® `__honey` å¯¹è±¡,æˆ‘ä»¬éœ€è¦åŠ ä¸Š `_Yo` ä»¥é˜²æ­¢ä¸å…¶ä»–ç±»ä¸­å®šä¹‰çš„ç›¸åŒåç§°çš„å±æ€§å‘ç”Ÿå†²çª.

---

---

## Section: Miscellaneous/æ‚é¡¹

### \> `+=` is faster/æ›´å¿«çš„ `+=`

\# ç”¨ "+" è¿æ¥ä¸‰ä¸ªå­—ç¬¦ä¸²:
\>>\> timeit.timeit("s1 = s1 + s2 + s3", setup\="s1 = ' ' \* 100000; s2 = ' ' \* 100000; s3 = ' ' \* 100000", number\=100)
0.25748300552368164
\# ç”¨ "+=" è¿æ¥ä¸‰ä¸ªå­—ç¬¦ä¸²:
\>>\> timeit.timeit("s1 += s2 + s3", setup\="s1 = ' ' \* 100000; s2 = ' ' \* 100000; s3 = ' ' \* 100000", number\=100)
0.012188911437988281

#### ğŸ’¡ è¯´æ˜:

- è¿æ¥ä¸¤ä¸ªä»¥ä¸Šçš„å­—ç¬¦ä¸²æ—¶ `+=` æ¯” `+` æ›´å¿«, å› ä¸ºåœ¨è®¡ç®—è¿‡ç¨‹ä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸² (ä¾‹å¦‚, `s1 += s2 + s3` ä¸­çš„ `s1`) ä¸ä¼šè¢«é”€æ¯.(è¯‘: å°±æ˜¯ `+=` æ‰§è¡Œçš„æ˜¯è¿½åŠ æ“ä½œï¼Œå°‘äº†ä¸€ä¸ªé”€æ¯æ–°å»ºçš„åŠ¨ä½œ.)

---

### \> Let's make a giant string!/æ¥åšä¸ªå·¨å¤§çš„å­—ç¬¦ä¸²å§ï¼

def add_string_with_plus(iters):
s \= ""
for i in range(iters):
s += "xyz"
assert len(s) \== 3\*iters

def add_bytes_with_plus(iters):
s \= b""
for i in range(iters):
s += b"xyz"
assert len(s) \== 3\*iters

def add_string_with_format(iters):
fs \= "{}"\*iters
s \= fs.format(\*(\["xyz"\]\*iters))
assert len(s) \== 3\*iters

def add_string_with_join(iters):
l \= \[\]
for i in range(iters):
l.append("xyz")
s \= "".join(l)
assert len(s) \== 3\*iters

def convert_list_to_string(l, iters):
s \= "".join(l)
assert len(s) \== 3\*iters

**Output:**

\>>\> timeit(add_string_with_plus(10000))
1000 loops, best of 3: 972 Âµs per loop
\>>\> timeit(add_bytes_with_plus(10000))
1000 loops, best of 3: 815 Âµs per loop
\>>\> timeit(add_string_with_format(10000))
1000 loops, best of 3: 508 Âµs per loop
\>>\> timeit(add_string_with_join(10000))
1000 loops, best of 3: 878 Âµs per loop
\>>\> l \= \["xyz"\]\*10000
\>>\> timeit(convert_list_to_string(l, 10000))
10000 loops, best of 3: 80 Âµs per loop

è®©æˆ‘ä»¬å°†è¿­ä»£æ¬¡æ•°å¢åŠ  10 å€.

\>>\> timeit(add_string_with_plus(100000)) \# æ‰§è¡Œæ—¶é—´çº¿æ€§å¢åŠ 
100 loops, best of 3: 9.75 ms per loop
\>>\> timeit(add_bytes_with_plus(100000)) \# äºŒæ¬¡å¢åŠ 
1000 loops, best of 3: 974 ms per loop
\>>\> timeit(add_string_with_format(100000)) \# çº¿æ€§å¢åŠ 
100 loops, best of 3: 5.25 ms per loop
\>>\> timeit(add_string_with_join(100000)) \# çº¿æ€§å¢åŠ 
100 loops, best of 3: 9.85 ms per loop
\>>\> l \= \["xyz"\]\*100000
\>>\> timeit(convert_list_to_string(l, 100000)) \# çº¿æ€§å¢åŠ 
1000 loops, best of 3: 723 Âµs per loop

#### ğŸ’¡ è¯´æ˜:

- ä½ å¯ä»¥åœ¨è¿™è·å¾—æ›´å¤š [timeit](https://docs.python.org/3/library/timeit.html) çš„ç›¸å…³ä¿¡æ¯. å®ƒé€šå¸¸ç”¨äºè¡¡é‡ä»£ç ç‰‡æ®µçš„æ‰§è¡Œæ—¶é—´.
- ä¸è¦ç”¨ `+` å»ç”Ÿæˆè¿‡é•¿çš„å­—ç¬¦ä¸², åœ¨ Python ä¸­, `str` æ˜¯ä¸å¯å˜çš„, æ‰€ä»¥åœ¨æ¯æ¬¡è¿æ¥ä¸­ä½ éƒ½è¦æŠŠå·¦å³ä¸¤ä¸ªå­—ç¬¦ä¸²å¤åˆ¶åˆ°æ–°çš„å­—ç¬¦ä¸²ä¸­. å¦‚æœä½ è¿æ¥å››ä¸ªé•¿åº¦ä¸º 10 çš„å­—ç¬¦ä¸², ä½ éœ€è¦æ‹·è´ (10+10) + ((10+10)+10) + (((10+10)+10)+10) = 90 ä¸ªå­—ç¬¦è€Œä¸æ˜¯ 40 ä¸ªå­—ç¬¦. éšç€å­—ç¬¦ä¸²çš„æ•°é‡å’Œå¤§å°çš„å¢åŠ , æƒ…å†µä¼šå˜å¾—è¶Šå‘çš„ç³Ÿç³• (å°±åƒ`add_bytes_with_plus` å‡½æ•°çš„æ‰§è¡Œæ—¶é—´ä¸€æ ·)
- å› æ­¤, æ›´å»ºè®®ä½¿ç”¨ `.format.` æˆ– `%` è¯­æ³• (ä½†æ˜¯, å¯¹äºçŸ­å­—ç¬¦ä¸², å®ƒä»¬æ¯” `+` ç¨æ…¢ä¸€ç‚¹).
- åˆæˆ–è€…, å¦‚æœä½ æ‰€éœ€çš„å†…å®¹å·²ç»ä»¥å¯è¿­ä»£å¯¹è±¡çš„å½¢å¼æä¾›äº†, ä½¿ç”¨ `''.join(å¯è¿­ä»£å¯¹è±¡)` è¦å¿«å¤šäº†.
- `add_string_with_plus` çš„æ‰§è¡Œæ—¶é—´æ²¡æœ‰åƒ `add_bytes_with_plus` ä¸€æ ·å‡ºç°äºŒæ¬¡å¢åŠ æ˜¯å› ä¸ºè§£é‡Šå™¨ä¼šå¦‚åŒä¸Šä¸€ä¸ªä¾‹å­æ‰€è®¨è®ºçš„ä¸€æ ·ä¼˜åŒ– `+=`. ç”¨ `s = s + "x" + "y" + "z"` æ›¿ä»£ `s += "xyz"` çš„è¯, æ‰§è¡Œæ—¶é—´å°±ä¼šäºŒæ¬¡å¢åŠ äº†.

  def add_string_with_plus(iters):
  s \= ""
  for i in range(iters):
  s \= s + "x" + "y" + "z"
  assert len(s) \== 3\*iters

  \>>\> timeit(add_string_with_plus(10000))
  100 loops, best of 3: 9.87 ms per loop
  \>>\> timeit(add_string_with_plus(100000)) \# æ‰§è¡Œæ—¶é—´äºŒæ¬¡å¢åŠ 
  1 loops, best of 3: 1.09 s per loop

---

### \> Explicit typecast of strings/å­—ç¬¦ä¸²çš„æ˜¾å¼ç±»å‹è½¬æ¢

a \= float('inf')
b \= float('nan')
c \= float('-iNf') \# è¿™äº›å­—ç¬¦ä¸²ä¸åŒºåˆ†å¤§å°å†™
d \= float('nan')

**Output:**

\>>\> a
inf
\>>\> b
nan
\>>\> c
\-inf
\>>\> float('some_other_string')
ValueError: could not convert string to float: some_other_string
\>>\> a \== \-c \#inf==inf
True
\>>\> None \== None \# None==None
True
\>>\> b \== d # ä½†æ˜¯ nan!=nan
False
\>>\> 50/a
0.0
\>>\> a/a
nan
\>>\> 23 + b
nan

#### ğŸ’¡ è¯´æ˜:

`'inf'` å’Œ `'nan'` æ˜¯ç‰¹æ®Šçš„å­—ç¬¦ä¸²(ä¸åŒºåˆ†å¤§å°å†™), å½“æ˜¾ç¤ºè½¬æ¢æˆ `float` å‹æ—¶, å®ƒä»¬åˆ†åˆ«ç”¨äºè¡¨ç¤ºæ•°å­¦æ„ä¹‰ä¸Šçš„ "æ— ç©·å¤§" å’Œ "éæ•°å­—".

---

### \> Minor Ones/å°çŸ¥è¯†ç‚¹

- `join()` æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ“ä½œè€Œä¸æ˜¯åˆ—è¡¨æ“ä½œ. (ç¬¬ä¸€æ¬¡æ¥è§¦ä¼šè§‰å¾—æœ‰ç‚¹è¿åç›´è§‰)

  **ğŸ’¡ è¯´æ˜:** å¦‚æœ `join()` æ˜¯å­—ç¬¦ä¸²æ–¹æ³• é‚£ä¹ˆå®ƒå°±å¯ä»¥å¤„ç†ä»»ä½•å¯è¿­ä»£çš„å¯¹è±¡(åˆ—è¡¨ï¼Œå…ƒç»„ï¼Œè¿­ä»£å™¨). å¦‚æœå®ƒæ˜¯åˆ—è¡¨æ–¹æ³•, åˆ™å¿…é¡»åœ¨æ¯ç§ç±»å‹ä¸­å•ç‹¬å®ç°. å¦å¤–, åœ¨ `list` å¯¹è±¡çš„é€šç”¨ API ä¸­å®ç°ä¸€ä¸ªä¸“ç”¨äºå­—ç¬¦ä¸²çš„æ–¹æ³•æ²¡æœ‰å¤ªå¤§çš„æ„ä¹‰.

- çœ‹ç€å¥‡æ€ªä½†èƒ½æ­£ç¡®è¿è¡Œçš„è¯­å¥:

  - `[] = ()` è¯­å¥åœ¨è¯­ä¹‰ä¸Šæ˜¯æ­£ç¡®çš„ (è§£åŒ…ä¸€ä¸ªç©ºçš„ `tuple` å¹¶èµ‹å€¼ç»™ `list`)
  - `'a'[0][0][0][0][0]` åœ¨è¯­ä¹‰ä¸Šä¹Ÿæ˜¯æ­£ç¡®çš„, å› ä¸ºåœ¨ Python ä¸­å­—ç¬¦ä¸²åŒæ—¶ä¹Ÿæ˜¯[åºåˆ—](https://docs.python.org/3/glossary.html#term-sequence)(å¯è¿­ä»£å¯¹è±¡æ”¯æŒä½¿ç”¨æ•´æ•°ç´¢å¼•è®¿é—®å…ƒç´ ).
  - `3 --0-- 5 == 8` å’Œ `--5 == 5` åœ¨è¯­ä¹‰ä¸Šéƒ½æ˜¯æ­£ç¡®çš„, ä¸”ç»“æœç­‰äº `True`.(è¯‘: 3 å‡è´Ÿ 0 ç­‰äº 3ï¼Œå†å‡è´Ÿ 5 ç›¸å½“äºåŠ  5 ç­‰äº 8ï¼›è´Ÿçš„è´Ÿ 5 ç­‰äº 5.)

- é‰´äº `a` æ˜¯ä¸€ä¸ªæ•°å­—, `++a` å’Œ `--a` éƒ½æ˜¯æœ‰æ•ˆçš„ Python è¯­å¥, ä½†å…¶æ•ˆæœä¸ C, C++ æˆ– Java ç­‰ä¸ä¸€æ ·.

  \>>\> a \= 5
  \>>\> a
  5
  \>>\> ++a
  5
  \>>\> \-\-a
  5

  **ğŸ’¡ è¯´æ˜:**

  - python é‡Œæ²¡æœ‰ `++` æ“ä½œç¬¦. è¿™å…¶å®æ˜¯ä¸¤ä¸ª `+` æ“ä½œç¬¦.
  - `++a` è¢«è§£æä¸º `+(+a)` æœ€åç­‰äº `a`. `--a` åŒç†.
  - è¿™ä¸ª StackOverflow [å›ç­”](https://stackoverflow.com/questions/3654830/why-are-there-no-and-operators-in-python) è®¨è®ºäº†ä¸ºä»€ä¹ˆ Python ä¸­ç¼ºå°‘å¢é‡å’Œå‡é‡è¿ç®—ç¬¦.

- Python ä½¿ç”¨ 2 ä¸ªå­—èŠ‚å­˜å‚¨å‡½æ•°ä¸­çš„æœ¬åœ°å˜é‡. ç†è®ºä¸Š, è¿™æ„å‘³ç€å‡½æ•°ä¸­åªèƒ½å®šä¹‰ 65536 ä¸ªå˜é‡. ä½†æ˜¯ï¼ŒPython å†…ç½®äº†ä¸€ä¸ªæ–¹ä¾¿çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ç”¨äºå­˜å‚¨è¶…è¿‡ 2^16 ä¸ªå˜é‡å. ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å½“å®šä¹‰äº†è¶…è¿‡ 65536 ä¸ªå±€éƒ¨å˜é‡æ—¶å †æ ˆä¸­å‘ç”Ÿçš„æƒ…å†µ (è­¦å‘Š: è¿™æ®µä»£ç ä¼šæ‰“å°å¤§çº¦ 2^18 è¡Œæ–‡æœ¬, è¯·åšå¥½å‡†å¤‡!):

  import dis
  exec("""
  def f():
  """ + """
  """.join(\["X"+str(x)+"=" + str(x) for x in range(65539)\]))

  f()

  print(dis.dis(f))

- ä½ çš„ _Python ä»£ç _ å¹¶ä¸ä¼šå¤šçº¿ç¨‹åŒæ—¶è¿è¡Œ (æ˜¯çš„, ä½ æ²¡å¬é”™!). è™½ç„¶ä½ è§‰å¾—ä¼šäº§ç”Ÿå¤šä¸ªçº¿ç¨‹å¹¶è®©å®ƒä»¬åŒæ—¶æ‰§è¡Œä½ çš„ä»£ç , ä½†æ˜¯, ç”±äº [å…¨å±€è§£é‡Šé”](https://wiki.python.org/moin/GlobalInterpreterLock)çš„å­˜åœ¨, ä½ æ‰€åšçš„åªæ˜¯è®©ä½ çš„çº¿ç¨‹ä¾æ¬¡åœ¨åŒä¸€ä¸ªæ ¸å¿ƒä¸Šæ‰§è¡Œ. Python å¤šçº¿ç¨‹é€‚ç”¨äº I/O å¯†é›†å‹çš„ä»»åŠ¡, ä½†å¦‚æœæƒ³è¦å¹¶è¡Œå¤„ç† CPU å¯†é›†å‹çš„ä»»åŠ¡, ä½ åº”è¯¥ä¼šæƒ³ä½¿ç”¨ [multiprocessing](https://docs.python.org/2/library/multiprocessing.html) æ¨¡å—.
- åˆ—è¡¨åˆ‡ç‰‡è¶…å‡ºç´¢å¼•è¾¹ç•Œè€Œä¸å¼•å‘ä»»ä½•é”™è¯¯

  \>>\> some_list \= \[1, 2, 3, 4, 5\]
  \>>\> some_list\[111:\]
  \[\]

- `int('Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©')` åœ¨ Python 3 ä¸­ä¼šè¿”å› `123456789`. åœ¨ Python ä¸­, åè¿›åˆ¶å­—ç¬¦åŒ…æ‹¬æ•°å­—å­—ç¬¦, ä»¥åŠå¯ç”¨äºå½¢æˆåè¿›åˆ¶æ•°å­—çš„æ‰€æœ‰å­—ç¬¦, ä¾‹å¦‚: U+0660, ARABIC-INDIC DIGIT ZERO. è¿™æœ‰ä¸€ä¸ªå…³äºæ­¤çš„ [æœ‰è¶£æ•…äº‹](http://chris.improbable.org/2014/8/25/adventures-in-unicode-digits/).
- `'abc'.count('') == 4`. è¿™æœ‰ä¸€ä¸ª `count` æ–¹æ³•çš„ç›¸è¿‘å®ç°, èƒ½æ›´å¥½çš„è¯´æ˜é—®é¢˜

  def count(s, sub):
  result \= 0
  for i in range(len(s) + 1 \- len(sub)):
  result += (s\[i:i + len(sub)\] \== sub)
  return result

  è¿™ä¸ªè¡Œä¸ºæ˜¯ç”±äºç©ºå­ä¸²(`''`)ä¸åŸå§‹å­—ç¬¦ä¸²ä¸­é•¿åº¦ä¸º 0 çš„åˆ‡ç‰‡ç›¸åŒ¹é…å¯¼è‡´çš„.

---

æ¬¢è¿å„ç§è¡¥ä¸! è¯¦æƒ…è¯·çœ‹[CONTRIBUTING.md](https://github.com/satwikkansal/wtfpython/blob/master/CONTRIBUTING.md).(è¯‘: è¿™æ˜¯ç»™åŸåº“æè´¡çŒ®çš„è¦æ±‚æ¨¡ç‰ˆ)

ä½ å¯ä»¥é€šè¿‡æ–°å»º [issue](https://github.com/satwikkansal/wtfpython/issues/new) æˆ–è€…åœ¨ä¸Š [Gitter](https://gitter.im/wtfpython/Lobby) ä¸æˆ‘ä»¬è¿›è¡Œè®¨è®º.

(è¯‘: å¦‚æœä½ æƒ³å¯¹è¿™ä¸ªç¿»è¯‘é¡¹ç›®æä¾›å¸®åŠ©, è¯·çœ‹[è¿™é‡Œ](https://github.com/leisurelicht/wtfpython-cn/blob/master/CONTRIBUTING.md))

è¿™ä¸ªç³»åˆ—æœ€åˆçš„æƒ³æ³•å’Œè®¾è®¡çµæ„Ÿæ¥è‡ªäº Denys Dovhan çš„é¡¹ç›® [wtfjs](https://github.com/denysdovhan/wtfjs). ç¤¾åŒºçš„å¼ºå¤§æ”¯æŒè®©å®ƒæˆé•¿ä¸ºç°åœ¨çš„æ¨¡æ ·.

#### Some nice Links!/ä¸€äº›ä¸é”™çš„èµ„æº

- [https://www.youtube.com/watch?v=sH4XF6pKKmk](https://www.youtube.com/watch?v=sH4XF6pKKmk)
- [https://www.reddit.com/r/Python/comments/3cu6ej/what_are_some_wtf_things_about_python](https://www.reddit.com/r/Python/comments/3cu6ej/what_are_some_wtf_things_about_python)
- [https://sopython.com/wiki/Common_Gotchas_In_Python](https://sopython.com/wiki/Common_Gotchas_In_Python)
- [https://stackoverflow.com/questions/530530/python-2-x-gotchas-and-landmines](https://stackoverflow.com/questions/530530/python-2-x-gotchas-and-landmines)
- [https://stackoverflow.com/questions/1011431/common-pitfalls-in-python](https://stackoverflow.com/questions/1011431/common-pitfalls-in-python)
- [https://www.python.org/doc/humor/](https://www.python.org/doc/humor/)
- [https://www.codementor.io/satwikkansal/python-practices-for-efficient-code-performance-memory-and-usability-aze6oiq65](https://www.codementor.io/satwikkansal/python-practices-for-efficient-code-performance-memory-and-usability-aze6oiq65)

[![CC 4.0](https://camo.githubusercontent.com/8faf26c628ab8cf2a5c40e4673880fd74f525fe5427983bb4c9f99302af8a1a4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d575446504c253230322e302d6c69676874677265792e7376673f7374796c653d666c61742d737175617265)](http://www.wtfpl.net/)

Â© [Satwik Kansal](https://satwikkansal.xyz/)
